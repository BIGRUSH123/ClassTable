{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\classtable\\\\src\\\\components\\\\CourseTimeParser.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Upload, FileText, AlertCircle, CheckCircle, Copy, Edit3, Save, X, Eye, AlertTriangle } from 'lucide-react';\nimport { parseCourseInfo, parseCourseTime, deduplicateTimeSlots } from '../utils/courseTimeParser';\n\n// 解析后的课程数据预览接口\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CourseTimeParser = ({\n  teachers,\n  onImportCourses,\n  onClose\n}) => {\n  _s();\n  const [inputText, setInputText] = useState('');\n  const [previewMode, setPreviewMode] = useState(false);\n  const [parsedCourses, setParsedCourses] = useState([]);\n  const [importResult, setImportResult] = useState(null);\n\n  // 示例数据\n  const exampleText = `有限自动机理论\t陈文宇,余盛季\t计算机科学与工程学院（网络空间安全学院）\t清水河\t32\t2\t1-6周，星期一第5-6节 星期三第5-6节 (立人楼B411)\n\t\t\t\t\t\t7-8周，星期一第5-6节 星期三第5-6节 (立人楼B411)\n高级软件开发技术\t孙明\t计算机科学与工程学院\t清水河\t16\t1\t1-8周，星期一第9-11节 (立人楼B402)\n新时代中国特色社会主义理论与实践10班\t2\t考试\t马克思主义学院\t封莎\t清水河\t1-5周，星期一第3-4节 (立人楼B417)\n7-10周，星期一第3-4节 (立人楼B417)\n1-4周，星期四第3-4节 (立人楼B417)\n6-10周，星期四第3-4节 (立人楼B417)`;\n\n  // 格式化时间显示\n  const formatTimeDisplay = timeSlots => {\n    if (timeSlots.length === 0) return '无时间安排';\n    return timeSlots.map(slot => {\n      const dayNames = ['', '周一', '周二', '周三', '周四', '周五', '周六', '周日'];\n      const dayName = dayNames[slot.dayOfWeek] || '未知';\n      const timeRange = slot.timeSlotIds.length > 1 ? `第${slot.timeSlotIds[0]}-${slot.timeSlotIds[slot.timeSlotIds.length - 1]}节` : `第${slot.timeSlotIds[0]}节`;\n      const location = slot.location ? ` (${slot.location})` : '';\n      const weeks = slot.weeks && slot.weeks.length > 0 ? slot.weeks.map(w => w.start === w.end ? `${w.start}周` : `${w.start}-${w.end}周`).join('，') : '全学期';\n      return `${weeks}，${dayName}${timeRange}${location}`;\n    }).join('；');\n  };\n\n  // 检测重复时间段\n  const findDuplicateTimeSlots = timeSlots => {\n    const duplicates = [];\n    const seen = new Set();\n    for (const slot of timeSlots) {\n      for (const timeSlotId of slot.timeSlotIds) {\n        const key = `周${['', '一', '二', '三', '四', '五', '六', '日'][slot.dayOfWeek]}第${timeSlotId}节`;\n        if (seen.has(key)) {\n          if (!duplicates.includes(key)) {\n            duplicates.push(key);\n          }\n        } else {\n          seen.add(key);\n        }\n      }\n    }\n    return duplicates;\n  };\n\n  // 预览解析结果\n  const handlePreview = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: '请输入课程数据'\n      });\n      return;\n    }\n    try {\n      const courses = parseCourseText(inputText);\n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: '未能解析出任何课程数据，请检查格式'\n        });\n        return;\n      }\n\n      // 转换为预览格式，并检查内部重复\n      const previews = courses.map((course, index) => {\n        // 检查该课程内部是否有重复的时间段\n        const duplicateSlots = findDuplicateTimeSlots(course.fixedTimeSlots);\n        const hasInternalDuplicates = duplicateSlots.length > 0;\n        return {\n          id: `preview_${index}`,\n          name: course.name,\n          teachers: course.teachers || [],\n          department: course.department || '未知学院',\n          campus: course.campus || '未知校区',\n          credits: course.credits,\n          timeSlots: course.fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(course.fixedTimeSlots),\n          isEditing: false,\n          hasError: hasInternalDuplicates,\n          errorMessage: hasInternalDuplicates ? `检测到重复时间段: ${duplicateSlots.join(', ')}` : undefined\n        };\n      });\n      setParsedCourses(previews);\n      setPreviewMode(true);\n      setImportResult(null);\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `解析失败: ${error instanceof Error ? error.message : '未知错误'}`\n      });\n    }\n  };\n\n  // 检查课程是否重复\n  const checkDuplicateCourses = (coursesToImport, existingCourses) => {\n    const duplicates = [];\n    const warnings = [];\n    for (const newCourse of coursesToImport) {\n      // 检查相同课程名和教师的重复\n      const duplicateName = existingCourses.find(existing => existing.name === newCourse.name && existing.teacherId === newCourse.teacherId);\n      if (duplicateName) {\n        duplicates.push({\n          course: newCourse,\n          reason: `相同课程名和教师: ${newCourse.name}`\n        });\n        continue;\n      }\n\n      // 检查时间冲突\n      for (const existingCourse of existingCourses) {\n        const hasTimeConflict = newCourse.fixedTimeSlots.some(newSlot => existingCourse.fixedTimeSlots.some(existingSlot => newSlot.dayOfWeek === existingSlot.dayOfWeek && newSlot.timeSlotIds.some(id => existingSlot.timeSlotIds.includes(id)) && hasWeekOverlap(newSlot.weeks, existingSlot.weeks)));\n        if (hasTimeConflict) {\n          warnings.push(`课程 \"${newCourse.name}\" 与现有课程 \"${existingCourse.name}\" 存在时间冲突`);\n        }\n      }\n    }\n    return {\n      duplicates,\n      warnings\n    };\n  };\n\n  // 检查周次是否重叠\n  const hasWeekOverlap = (weeks1, weeks2) => {\n    if (!weeks1 || !weeks2) return true; // 如果没有指定周次，假设重叠\n\n    return weeks1.some(w1 => weeks2.some(w2 => w1.start <= w2.end && w1.end >= w2.start));\n  };\n\n  // 从预览直接导入\n  const handleImportFromPreview = () => {\n    try {\n      const courses = parsedCourses.map(preview => {\n        var _teachers$, _preview$timeSlots$;\n        const teacher = teachers.find(t => preview.teachers.some(name => t.name.includes(name) || name.includes(t.name)));\n        return {\n          name: preview.name,\n          subject: preview.department,\n          teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || ((_teachers$ = teachers[0]) === null || _teachers$ === void 0 ? void 0 : _teachers$.id) || 'unknown',\n          credits: preview.credits,\n          fixedTimeSlots: preview.timeSlots,\n          location: (_preview$timeSlots$ = preview.timeSlots[0]) === null || _preview$timeSlots$ === void 0 ? void 0 : _preview$timeSlots$.location,\n          weeks: `1-20周`,\n          teachers: preview.teachers,\n          department: preview.department,\n          campus: preview.campus\n        };\n      });\n\n      // 获取现有课程进行重复检查\n      // 注意：这里需要传入现有课程，但组件接口中没有，所以先跳过检查\n      // const { duplicates, warnings } = checkDuplicateCourses(courses, existingCourses);\n\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: '课程导入成功！',\n        count: courses.length\n      });\n      setPreviewMode(false);\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `导入失败: ${error instanceof Error ? error.message : '未知错误'}`\n      });\n    }\n  };\n\n  // 直接导入（跳过预览）\n  const handleDirectImport = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: '请输入课程数据'\n      });\n      return;\n    }\n    try {\n      const courses = parseCourseText(inputText);\n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: '未能解析出任何课程数据，请检查格式'\n        });\n        return;\n      }\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: '课程导入成功！',\n        count: courses.length\n      });\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `导入失败: ${error instanceof Error ? error.message : '未知错误'}`\n      });\n    }\n  };\n\n  // 编辑课程信息\n  const handleEditCourse = (id, field, value) => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.id === id) {\n        const updated = {\n          ...course,\n          [field]: value\n        };\n\n        // 如果修改了时间相关字段，重新生成时间显示\n        if (field === 'timeSlots') {\n          updated.timeDisplay = formatTimeDisplay(value);\n        }\n        return updated;\n      }\n      return course;\n    }));\n  };\n\n  // 切换编辑模式\n  const toggleEdit = id => {\n    setParsedCourses(prev => prev.map(course => course.id === id ? {\n      ...course,\n      isEditing: !course.isEditing\n    } : course));\n  };\n\n  // 删除课程\n  const deleteCourse = id => {\n    setParsedCourses(prev => prev.filter(course => course.id !== id));\n  };\n\n  // 返回编辑模式\n  const handleBackToEdit = () => {\n    setPreviewMode(false);\n    setImportResult(null);\n  };\n\n  // 自动修复重复时间段\n  const handleAutoFixDuplicates = () => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.hasError) {\n        // 使用解析器的去重功能重新处理时间段\n        const fixedTimeSlots = deduplicateTimeSlots(course.timeSlots);\n        return {\n          ...course,\n          timeSlots: fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(fixedTimeSlots),\n          hasError: false,\n          errorMessage: undefined\n        };\n      }\n      return course;\n    }));\n  };\n\n  // 解析课程文本\n  const parseCourseText = text => {\n    const courses = [];\n\n    // 首先按双换行或多个连续换行分割，处理可能的多个课程记录\n    const courseBlocks = text.trim().split(/\\n\\s*\\n/).filter(block => block.trim());\n\n    // 如果没有明显的分块，尝试按行处理，但要考虑多行数据\n    const blocksToProcess = courseBlocks.length > 1 ? courseBlocks : [text.trim()];\n    for (const block of blocksToProcess) {\n      try {\n        var _teachers$2, _courseInfo$timeSlots;\n        // 对于每个块，可能包含一个课程的完整信息（包括多行时间数据）\n        const courseInfo = parseCourseInfo(block);\n\n        // 查找对应的教师ID\n        const teacherNames = courseInfo.teachers;\n        const teacher = teachers.find(t => teacherNames.some(name => t.name.includes(name) || name.includes(t.name)));\n        courses.push({\n          name: courseInfo.name,\n          subject: courseInfo.department || '未知学科',\n          teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || ((_teachers$2 = teachers[0]) === null || _teachers$2 === void 0 ? void 0 : _teachers$2.id) || 'unknown',\n          credits: courseInfo.credits || 2,\n          fixedTimeSlots: courseInfo.timeSlots,\n          location: (_courseInfo$timeSlots = courseInfo.timeSlots[0]) === null || _courseInfo$timeSlots === void 0 ? void 0 : _courseInfo$timeSlots.location,\n          weeks: `1-20周`,\n          // 默认全学期\n          teachers: courseInfo.teachers,\n          department: courseInfo.department,\n          campus: courseInfo.campus\n        });\n      } catch (error) {\n        console.warn('解析课程块失败:', block, error);\n\n        // 尝试按行处理作为后备方案\n        const lines = block.split('\\n').filter(line => line.trim());\n        for (const line of lines) {\n          // 只处理包含制表符的行（主要课程信息）\n          if (!line.includes('\\t')) continue;\n          try {\n            const parts = line.split('\\t').map(part => part.trim());\n            if (parts.length >= 6) {\n              var _teachers$3, _timeSlots$;\n              // 尝试两种格式\n              let name;\n              let teacherName;\n              let department;\n              let campus;\n              let credits;\n              let scheduleText;\n\n              // 检测格式\n              const secondFieldIsNumber = /^\\d+$/.test(parts[1]);\n              if (secondFieldIsNumber && parts.length >= 6) {\n                // 格式1: 课程名\t学分\t考试方式\t学院\t教师\t校区\t时间安排...\n                [name,,, department, teacherName, campus, ...scheduleText] = parts;\n                credits = parseInt(parts[1]) || 2;\n              } else {\n                // 格式2: 课程名\t教师\t学院\t校区\t学时\t学分\t时间安排...\n                [name, teacherName, department, campus,,, ...scheduleText] = parts;\n                credits = parseInt(parts[5]) || 2;\n              }\n\n              // 收集该课程的所有时间信息（包括后续行）\n              const allTimeLines = [scheduleText.join('\\t')];\n              const currentLineIndex = lines.indexOf(line);\n              for (let i = currentLineIndex + 1; i < lines.length; i++) {\n                const nextLine = lines[i];\n                if (nextLine.includes('\\t')) break; // 遇到新的课程记录\n                if (/\\d+[-–]?\\d*周|星期[一二三四五六日]|第\\d+/.test(nextLine)) {\n                  allTimeLines.push(nextLine);\n                }\n              }\n              const timeSlots = parseCourseTime(allTimeLines.join('\\n'));\n              const teacher = teachers.find(t => t.name.includes(teacherName) || teacherName.includes(t.name));\n              courses.push({\n                name,\n                subject: department || '未知学科',\n                teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || ((_teachers$3 = teachers[0]) === null || _teachers$3 === void 0 ? void 0 : _teachers$3.id) || 'unknown',\n                credits,\n                fixedTimeSlots: timeSlots,\n                location: (_timeSlots$ = timeSlots[0]) === null || _timeSlots$ === void 0 ? void 0 : _timeSlots$.location,\n                weeks: `1-20周`,\n                teachers: [teacherName],\n                department,\n                campus\n              });\n            }\n          } catch (fallbackError) {\n            console.warn('后备解析也失败:', line, fallbackError);\n          }\n        }\n      }\n    }\n    return courses;\n  };\n  const copyExample = () => {\n    setInputText(exampleText);\n  };\n\n  // 渲染预览表格\n  const renderPreviewTable = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), \"\\u89E3\\u6790\\u7ED3\\u679C\\u9884\\u89C8 (\", parsedCourses.length, \" \\u95E8\\u8BFE\\u7A0B)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), parsedCourses.some(c => c.hasError) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-yellow-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: \"\\u68C0\\u6D4B\\u5230\\u6570\\u636E\\u95EE\\u9898\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u90E8\\u5206\\u8BFE\\u7A0B\\u5B58\\u5728\\u91CD\\u590D\\u7684\\u65F6\\u95F4\\u5B89\\u6392\\uFF0C\\u5EFA\\u8BAE\\u5728\\u5BFC\\u5165\\u524D\\u8FDB\\u884C\\u4FEE\\u6B63\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleAutoFixDuplicates,\n                className: \"mt-2 text-blue-600 hover:text-blue-800 underline text-sm\",\n                children: \"\\u81EA\\u52A8\\u4FEE\\u590D\\u91CD\\u590D\\u95EE\\u9898\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBackToEdit,\n        className: \"btn-secondary flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Edit3, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), \"\\u8FD4\\u56DE\\u7F16\\u8F91\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full border-collapse border border-gray-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u8BFE\\u7A0B\\u540D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u6559\\u5E08\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u5B66\\u9662\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u6821\\u533A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u5B66\\u5206\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u65F6\\u95F4\\u5B89\\u6392\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-center\",\n              children: \"\\u64CD\\u4F5C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: parsedCourses.map(course => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"hover:bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.name,\n                onChange: e => handleEditCourse(course.id, 'name', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: course.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.teachers.join(', '),\n                onChange: e => handleEditCourse(course.id, 'teachers', e.target.value.split(',').map(t => t.trim())),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\",\n                placeholder: \"\\u591A\\u4E2A\\u6559\\u5E08\\u7528\\u9017\\u53F7\\u5206\\u9694\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.teachers.join(', ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.department,\n                onChange: e => handleEditCourse(course.id, 'department', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.department\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.campus,\n                onChange: e => handleEditCourse(course.id, 'campus', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.campus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: course.credits,\n                onChange: e => handleEditCourse(course.id, 'credits', parseInt(e.target.value) || 0),\n                className: \"w-20 p-1 border border-gray-300 rounded text-sm\",\n                min: \"0\",\n                max: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.credits\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2 max-w-xs\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-700 overflow-hidden\",\n                children: [course.timeDisplay, course.hasError && course.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-1 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs flex items-start gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                    className: \"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: course.errorMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 553,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleEdit(course.id),\n                  className: `p-1 rounded hover:bg-gray-100 ${course.isEditing ? 'text-green-600' : 'text-blue-600'}`,\n                  title: course.isEditing ? '保存' : '编辑',\n                  children: course.isEditing ? /*#__PURE__*/_jsxDEV(Save, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 43\n                  }, this) : /*#__PURE__*/_jsxDEV(Edit3, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 74\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deleteCourse(course.id),\n                  className: \"p-1 rounded hover:bg-gray-100 text-red-600\",\n                  title: \"\\u5220\\u9664\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 574,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 17\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-3 pt-4 border-t\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleImportFromPreview,\n        disabled: parsedCourses.length === 0,\n        className: \"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this), \"\\u786E\\u8BA4\\u5BFC\\u5165 (\", parsedCourses.length, \" \\u95E8\\u8BFE\\u7A0B)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"btn-secondary\",\n        children: \"\\u53D6\\u6D88\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 434,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this), \"\\u8BFE\\u7A0B\\u65F6\\u95F4\\u89E3\\u6790\\u5BFC\\u5165\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this), previewMode ? renderPreviewTable() : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"\\u8BFE\\u7A0B\\u6570\\u636E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: copyExample,\n              className: \"text-sm btn-secondary flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(Copy, {\n                className: \"h-3 w-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 19\n              }, this), \"\\u4F7F\\u7528\\u793A\\u4F8B\\u6570\\u636E\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: inputText,\n            onChange: e => setInputText(e.target.value),\n            placeholder: \"\\u8BF7\\u7C98\\u8D34\\u8BFE\\u7A0B\\u6570\\u636E\\uFF0C\\u6BCF\\u884C\\u4E00\\u95E8\\u8BFE\\u7A0B\\uFF0C\\u652F\\u6301\\u591A\\u79CD\\u683C\\u5F0F\\u548C\\u591A\\u884C\\u65F6\\u95F4\\u5B89\\u6392\",\n            className: \"w-full h-40 p-3 border border-gray-300 rounded-lg text-sm font-mono\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-blue-900 mb-2 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 17\n            }, this), \"\\u652F\\u6301\\u7684\\u6570\\u636E\\u683C\\u5F0F\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-800 space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u683C\\u5F0F1\\uFF08\\u6807\\u51C6\\u683C\\u5F0F\\uFF09\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BFE\\u7A0B\\u540D \\xA0 \\u6559\\u5E08 \\xA0 \\u5B66\\u9662 \\xA0 \\u6821\\u533A \\xA0 \\u5B66\\u65F6 \\xA0 \\u5B66\\u5206 \\xA0 \\u65F6\\u95F4\\u5B89\\u6392\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u683C\\u5F0F2\\uFF08\\u65B0\\u683C\\u5F0F\\uFF09\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BFE\\u7A0B\\u540D \\xA0 \\u5B66\\u5206 \\xA0 \\u8003\\u8BD5\\u65B9\\u5F0F \\xA0 \\u5B66\\u9662 \\xA0 \\u6559\\u5E08 \\xA0 \\u6821\\u533A \\xA0 \\u65F6\\u95F4\\u5B89\\u6392\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u65F6\\u95F4\\u683C\\u5F0F\\u793A\\u4F8B\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 1-5\\u5468\\uFF0C\\u661F\\u671F\\u4E00\\u7B2C3-4\\u8282 (\\u7ACB\\u4EBA\\u697CB417)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 7-10\\u5468\\uFF0C\\u661F\\u671F\\u4E00\\u7B2C3-4\\u8282 (\\u7ACB\\u4EBA\\u697CB417)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u652F\\u6301\\u591A\\u884C\\u65F6\\u95F4\\u6570\\u636E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 24\n                }, this), \"\\uFF0C\\u81EA\\u52A8\\u8BC6\\u522B\\u7EED\\u884C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 \\u81EA\\u52A8\\u8BC6\\u522B\\u661F\\u671F\\u548C\\u8282\\u6B21\\uFF0C\\u652F\\u6301\\u8FDE\\u7EED\\u8282\\u6B21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 13\n        }, this), importResult && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `p-4 rounded-lg flex items-start gap-3 ${importResult.success ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`,\n          children: [importResult.success ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: \"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `font-medium ${importResult.success ? 'text-green-900' : 'text-red-900'}`,\n              children: importResult.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 19\n            }, this), importResult.count && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-green-700 text-sm mt-1\",\n              children: [\"\\u6210\\u529F\\u5BFC\\u5165 \", importResult.count, \" \\u95E8\\u8BFE\\u7A0B\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreview,\n            disabled: !inputText.trim(),\n            className: \"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(Eye, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 17\n            }, this), \"\\u89E3\\u6790\\u9884\\u89C8\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDirectImport,\n            disabled: !inputText.trim(),\n            className: \"btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 17\n            }, this), \"\\u76F4\\u63A5\\u5BFC\\u5165\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"btn-secondary\",\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 604,\n    columnNumber: 5\n  }, this);\n};\n_s(CourseTimeParser, \"qzebVJKO1Jcy8ey+GoJo0c1dmRw=\");\n_c = CourseTimeParser;\nvar _c;\n$RefreshReg$(_c, \"CourseTimeParser\");","map":{"version":3,"names":["React","useState","Upload","FileText","AlertCircle","CheckCircle","Copy","Edit3","Save","X","Eye","AlertTriangle","parseCourseInfo","parseCourseTime","deduplicateTimeSlots","jsxDEV","_jsxDEV","CourseTimeParser","teachers","onImportCourses","onClose","_s","inputText","setInputText","previewMode","setPreviewMode","parsedCourses","setParsedCourses","importResult","setImportResult","exampleText","formatTimeDisplay","timeSlots","length","map","slot","dayNames","dayName","dayOfWeek","timeRange","timeSlotIds","location","weeks","w","start","end","join","findDuplicateTimeSlots","duplicates","seen","Set","timeSlotId","key","has","includes","push","add","handlePreview","trim","success","message","courses","parseCourseText","previews","course","index","duplicateSlots","fixedTimeSlots","hasInternalDuplicates","id","name","department","campus","credits","timeDisplay","isEditing","hasError","errorMessage","undefined","error","Error","checkDuplicateCourses","coursesToImport","existingCourses","warnings","newCourse","duplicateName","find","existing","teacherId","reason","existingCourse","hasTimeConflict","some","newSlot","existingSlot","hasWeekOverlap","weeks1","weeks2","w1","w2","handleImportFromPreview","preview","_teachers$","_preview$timeSlots$","teacher","t","subject","count","handleDirectImport","handleEditCourse","field","value","prev","updated","toggleEdit","deleteCourse","filter","handleBackToEdit","handleAutoFixDuplicates","text","courseBlocks","split","block","blocksToProcess","_teachers$2","_courseInfo$timeSlots","courseInfo","teacherNames","console","warn","lines","line","parts","part","_teachers$3","_timeSlots$","teacherName","scheduleText","secondFieldIsNumber","test","parseInt","allTimeLines","currentLineIndex","indexOf","i","nextLine","fallbackError","copyExample","renderPreviewTable","className","children","fileName","_jsxFileName","lineNumber","columnNumber","c","onClick","type","onChange","e","target","placeholder","min","max","title","disabled","_c","$RefreshReg$"],"sources":["D:/code/classtable/src/components/CourseTimeParser.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Course, Teacher, FixedTimeSlot, WeekRange } from '../types';\r\nimport { Upload, FileText, AlertCircle, CheckCircle, Copy, Edit3, Save, X, Eye, AlertTriangle } from 'lucide-react';\r\nimport { parseCourseInfo, parseCourseTime, deduplicateTimeSlots } from '../utils/courseTimeParser';\r\n\r\ninterface CourseTimeParserProps {\r\n  teachers: Teacher[];\r\n  onImportCourses: (courses: Omit<Course, 'id'>[]) => void;\r\n  onClose: () => void;\r\n}\r\n\r\n// 解析后的课程数据预览接口\r\ninterface ParsedCoursePreview {\r\n  id: string;\r\n  name: string;\r\n  teachers: string[];\r\n  department: string;\r\n  campus: string;\r\n  credits: number;\r\n  timeSlots: FixedTimeSlot[];\r\n  timeDisplay: string;\r\n  isEditing: boolean;\r\n  hasError: boolean;\r\n  errorMessage?: string;\r\n}\r\n\r\nexport const CourseTimeParser: React.FC<CourseTimeParserProps> = ({\r\n  teachers,\r\n  onImportCourses,\r\n  onClose\r\n}) => {\r\n  const [inputText, setInputText] = useState('');\r\n  const [previewMode, setPreviewMode] = useState(false);\r\n  const [parsedCourses, setParsedCourses] = useState<ParsedCoursePreview[]>([]);\r\n  const [importResult, setImportResult] = useState<{\r\n    success: boolean;\r\n    message: string;\r\n    count?: number;\r\n  } | null>(null);\r\n\r\n  // 示例数据\r\n  const exampleText = `有限自动机理论\t陈文宇,余盛季\t计算机科学与工程学院（网络空间安全学院）\t清水河\t32\t2\t1-6周，星期一第5-6节 星期三第5-6节 (立人楼B411)\r\n\t\t\t\t\t\t7-8周，星期一第5-6节 星期三第5-6节 (立人楼B411)\r\n高级软件开发技术\t孙明\t计算机科学与工程学院\t清水河\t16\t1\t1-8周，星期一第9-11节 (立人楼B402)\r\n新时代中国特色社会主义理论与实践10班\t2\t考试\t马克思主义学院\t封莎\t清水河\t1-5周，星期一第3-4节 (立人楼B417)\r\n7-10周，星期一第3-4节 (立人楼B417)\r\n1-4周，星期四第3-4节 (立人楼B417)\r\n6-10周，星期四第3-4节 (立人楼B417)`;\r\n\r\n  // 格式化时间显示\r\n  const formatTimeDisplay = (timeSlots: FixedTimeSlot[]): string => {\r\n    if (timeSlots.length === 0) return '无时间安排';\r\n    \r\n    return timeSlots.map(slot => {\r\n      const dayNames = ['', '周一', '周二', '周三', '周四', '周五', '周六', '周日'];\r\n      const dayName = dayNames[slot.dayOfWeek] || '未知';\r\n      const timeRange = slot.timeSlotIds.length > 1 \r\n        ? `第${slot.timeSlotIds[0]}-${slot.timeSlotIds[slot.timeSlotIds.length - 1]}节`\r\n        : `第${slot.timeSlotIds[0]}节`;\r\n      const location = slot.location ? ` (${slot.location})` : '';\r\n      const weeks = slot.weeks && slot.weeks.length > 0 \r\n        ? slot.weeks.map(w => w.start === w.end ? `${w.start}周` : `${w.start}-${w.end}周`).join('，')\r\n        : '全学期';\r\n      \r\n      return `${weeks}，${dayName}${timeRange}${location}`;\r\n    }).join('；');\r\n  };\r\n\r\n  // 检测重复时间段\r\n  const findDuplicateTimeSlots = (timeSlots: FixedTimeSlot[]): string[] => {\r\n    const duplicates: string[] = [];\r\n    const seen = new Set<string>();\r\n    \r\n    for (const slot of timeSlots) {\r\n      for (const timeSlotId of slot.timeSlotIds) {\r\n        const key = `周${['', '一', '二', '三', '四', '五', '六', '日'][slot.dayOfWeek]}第${timeSlotId}节`;\r\n        if (seen.has(key)) {\r\n          if (!duplicates.includes(key)) {\r\n            duplicates.push(key);\r\n          }\r\n        } else {\r\n          seen.add(key);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return duplicates;\r\n  };\r\n\r\n  // 预览解析结果\r\n  const handlePreview = () => {\r\n    if (!inputText.trim()) {\r\n      setImportResult({\r\n        success: false,\r\n        message: '请输入课程数据'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const courses = parseCourseText(inputText);\r\n      \r\n      if (courses.length === 0) {\r\n        setImportResult({\r\n          success: false,\r\n          message: '未能解析出任何课程数据，请检查格式'\r\n        });\r\n        return;\r\n      }\r\n\r\n      // 转换为预览格式，并检查内部重复\r\n      const previews: ParsedCoursePreview[] = courses.map((course, index) => {\r\n        // 检查该课程内部是否有重复的时间段\r\n        const duplicateSlots = findDuplicateTimeSlots(course.fixedTimeSlots);\r\n        const hasInternalDuplicates = duplicateSlots.length > 0;\r\n        \r\n        return {\r\n          id: `preview_${index}`,\r\n          name: course.name,\r\n          teachers: course.teachers || [],\r\n          department: course.department || '未知学院',\r\n          campus: course.campus || '未知校区',\r\n          credits: course.credits,\r\n          timeSlots: course.fixedTimeSlots,\r\n          timeDisplay: formatTimeDisplay(course.fixedTimeSlots),\r\n          isEditing: false,\r\n          hasError: hasInternalDuplicates,\r\n          errorMessage: hasInternalDuplicates ? `检测到重复时间段: ${duplicateSlots.join(', ')}` : undefined\r\n        };\r\n      });\r\n\r\n      setParsedCourses(previews);\r\n      setPreviewMode(true);\r\n      setImportResult(null);\r\n    } catch (error) {\r\n      setImportResult({\r\n        success: false,\r\n        message: `解析失败: ${error instanceof Error ? error.message : '未知错误'}`\r\n      });\r\n    }\r\n  };\r\n\r\n  // 检查课程是否重复\r\n  const checkDuplicateCourses = (coursesToImport: Omit<Course, 'id'>[], existingCourses: Course[]) => {\r\n    const duplicates: { course: Omit<Course, 'id'>; reason: string }[] = [];\r\n    const warnings: string[] = [];\r\n    \r\n    for (const newCourse of coursesToImport) {\r\n      // 检查相同课程名和教师的重复\r\n      const duplicateName = existingCourses.find(existing => \r\n        existing.name === newCourse.name && existing.teacherId === newCourse.teacherId\r\n      );\r\n      \r\n      if (duplicateName) {\r\n        duplicates.push({\r\n          course: newCourse,\r\n          reason: `相同课程名和教师: ${newCourse.name}`\r\n        });\r\n        continue;\r\n      }\r\n      \r\n      // 检查时间冲突\r\n      for (const existingCourse of existingCourses) {\r\n        const hasTimeConflict = newCourse.fixedTimeSlots.some(newSlot =>\r\n          existingCourse.fixedTimeSlots.some(existingSlot =>\r\n            newSlot.dayOfWeek === existingSlot.dayOfWeek &&\r\n            newSlot.timeSlotIds.some(id => existingSlot.timeSlotIds.includes(id)) &&\r\n            hasWeekOverlap(newSlot.weeks, existingSlot.weeks)\r\n          )\r\n        );\r\n        \r\n        if (hasTimeConflict) {\r\n          warnings.push(`课程 \"${newCourse.name}\" 与现有课程 \"${existingCourse.name}\" 存在时间冲突`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return { duplicates, warnings };\r\n  };\r\n\r\n  // 检查周次是否重叠\r\n  const hasWeekOverlap = (weeks1?: WeekRange[], weeks2?: WeekRange[]): boolean => {\r\n    if (!weeks1 || !weeks2) return true; // 如果没有指定周次，假设重叠\r\n    \r\n    return weeks1.some(w1 =>\r\n      weeks2.some(w2 =>\r\n        w1.start <= w2.end && w1.end >= w2.start\r\n      )\r\n    );\r\n  };\r\n\r\n  // 从预览直接导入\r\n  const handleImportFromPreview = () => {\r\n    try {\r\n      const courses: Omit<Course, 'id'>[] = parsedCourses.map(preview => {\r\n        const teacher = teachers.find(t => \r\n          preview.teachers.some(name => t.name.includes(name) || name.includes(t.name))\r\n        );\r\n\r\n        return {\r\n          name: preview.name,\r\n          subject: preview.department,\r\n          teacherId: teacher?.id || teachers[0]?.id || 'unknown',\r\n          credits: preview.credits,\r\n          fixedTimeSlots: preview.timeSlots,\r\n          location: preview.timeSlots[0]?.location,\r\n          weeks: `1-20周`,\r\n          teachers: preview.teachers,\r\n          department: preview.department,\r\n          campus: preview.campus\r\n        };\r\n      });\r\n\r\n      // 获取现有课程进行重复检查\r\n      // 注意：这里需要传入现有课程，但组件接口中没有，所以先跳过检查\r\n      // const { duplicates, warnings } = checkDuplicateCourses(courses, existingCourses);\r\n\r\n      onImportCourses(courses);\r\n      setImportResult({\r\n        success: true,\r\n        message: '课程导入成功！',\r\n        count: courses.length\r\n      });\r\n      setPreviewMode(false);\r\n      setInputText('');\r\n    } catch (error) {\r\n      setImportResult({\r\n        success: false,\r\n        message: `导入失败: ${error instanceof Error ? error.message : '未知错误'}`\r\n      });\r\n    }\r\n  };\r\n\r\n  // 直接导入（跳过预览）\r\n  const handleDirectImport = () => {\r\n    if (!inputText.trim()) {\r\n      setImportResult({\r\n        success: false,\r\n        message: '请输入课程数据'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const courses = parseCourseText(inputText);\r\n      \r\n      if (courses.length === 0) {\r\n        setImportResult({\r\n          success: false,\r\n          message: '未能解析出任何课程数据，请检查格式'\r\n        });\r\n        return;\r\n      }\r\n\r\n      onImportCourses(courses);\r\n      setImportResult({\r\n        success: true,\r\n        message: '课程导入成功！',\r\n        count: courses.length\r\n      });\r\n      setInputText('');\r\n    } catch (error) {\r\n      setImportResult({\r\n        success: false,\r\n        message: `导入失败: ${error instanceof Error ? error.message : '未知错误'}`\r\n      });\r\n    }\r\n  };\r\n\r\n  // 编辑课程信息\r\n  const handleEditCourse = (id: string, field: keyof ParsedCoursePreview, value: any) => {\r\n    setParsedCourses(prev => prev.map(course => {\r\n      if (course.id === id) {\r\n        const updated = { ...course, [field]: value };\r\n        \r\n        // 如果修改了时间相关字段，重新生成时间显示\r\n        if (field === 'timeSlots') {\r\n          updated.timeDisplay = formatTimeDisplay(value);\r\n        }\r\n        \r\n        return updated;\r\n      }\r\n      return course;\r\n    }));\r\n  };\r\n\r\n  // 切换编辑模式\r\n  const toggleEdit = (id: string) => {\r\n    setParsedCourses(prev => prev.map(course => \r\n      course.id === id \r\n        ? { ...course, isEditing: !course.isEditing }\r\n        : course\r\n    ));\r\n  };\r\n\r\n  // 删除课程\r\n  const deleteCourse = (id: string) => {\r\n    setParsedCourses(prev => prev.filter(course => course.id !== id));\r\n  };\r\n\r\n  // 返回编辑模式\r\n  const handleBackToEdit = () => {\r\n    setPreviewMode(false);\r\n    setImportResult(null);\r\n  };\r\n\r\n  // 自动修复重复时间段\r\n  const handleAutoFixDuplicates = () => {\r\n    setParsedCourses(prev => prev.map(course => {\r\n      if (course.hasError) {\r\n        // 使用解析器的去重功能重新处理时间段\r\n        const fixedTimeSlots = deduplicateTimeSlots(course.timeSlots);\r\n        return {\r\n          ...course,\r\n          timeSlots: fixedTimeSlots,\r\n          timeDisplay: formatTimeDisplay(fixedTimeSlots),\r\n          hasError: false,\r\n          errorMessage: undefined\r\n        };\r\n      }\r\n      return course;\r\n    }));\r\n  };\r\n\r\n  // 解析课程文本\r\n  const parseCourseText = (text: string): Omit<Course, 'id'>[] => {\r\n    const courses: Omit<Course, 'id'>[] = [];\r\n    \r\n    // 首先按双换行或多个连续换行分割，处理可能的多个课程记录\r\n    const courseBlocks = text.trim().split(/\\n\\s*\\n/).filter(block => block.trim());\r\n    \r\n    // 如果没有明显的分块，尝试按行处理，但要考虑多行数据\r\n    const blocksToProcess = courseBlocks.length > 1 ? courseBlocks : [text.trim()];\r\n    \r\n    for (const block of blocksToProcess) {\r\n      try {\r\n        // 对于每个块，可能包含一个课程的完整信息（包括多行时间数据）\r\n        const courseInfo = parseCourseInfo(block);\r\n        \r\n        // 查找对应的教师ID\r\n        const teacherNames = courseInfo.teachers;\r\n        const teacher = teachers.find(t => \r\n          teacherNames.some(name => t.name.includes(name) || name.includes(t.name))\r\n        );\r\n\r\n        courses.push({\r\n          name: courseInfo.name,\r\n          subject: courseInfo.department || '未知学科',\r\n          teacherId: teacher?.id || teachers[0]?.id || 'unknown',\r\n          credits: courseInfo.credits || 2,\r\n          fixedTimeSlots: courseInfo.timeSlots,\r\n          location: courseInfo.timeSlots[0]?.location,\r\n          weeks: `1-20周`, // 默认全学期\r\n          teachers: courseInfo.teachers,\r\n          department: courseInfo.department,\r\n          campus: courseInfo.campus\r\n        });\r\n      } catch (error) {\r\n        console.warn('解析课程块失败:', block, error);\r\n        \r\n        // 尝试按行处理作为后备方案\r\n        const lines = block.split('\\n').filter(line => line.trim());\r\n        for (const line of lines) {\r\n          // 只处理包含制表符的行（主要课程信息）\r\n          if (!line.includes('\\t')) continue;\r\n          \r\n          try {\r\n            const parts = line.split('\\t').map(part => part.trim());\r\n            if (parts.length >= 6) {\r\n              // 尝试两种格式\r\n              let name: string;\r\n              let teacherName: string;\r\n              let department: string;\r\n              let campus: string;\r\n              let credits: number;\r\n              let scheduleText: string[];\r\n              \r\n              // 检测格式\r\n              const secondFieldIsNumber = /^\\d+$/.test(parts[1]);\r\n              \r\n              if (secondFieldIsNumber && parts.length >= 6) {\r\n                // 格式1: 课程名\t学分\t考试方式\t学院\t教师\t校区\t时间安排...\r\n                [name, , , department, teacherName, campus, ...scheduleText] = parts;\r\n                credits = parseInt(parts[1]) || 2;\r\n              } else {\r\n                // 格式2: 课程名\t教师\t学院\t校区\t学时\t学分\t时间安排...\r\n                [name, teacherName, department, campus, , , ...scheduleText] = parts;\r\n                credits = parseInt(parts[5]) || 2;\r\n              }\r\n              \r\n              // 收集该课程的所有时间信息（包括后续行）\r\n              const allTimeLines = [scheduleText.join('\\t')];\r\n              const currentLineIndex = lines.indexOf(line);\r\n              for (let i = currentLineIndex + 1; i < lines.length; i++) {\r\n                const nextLine = lines[i];\r\n                if (nextLine.includes('\\t')) break; // 遇到新的课程记录\r\n                if (/\\d+[-–]?\\d*周|星期[一二三四五六日]|第\\d+/.test(nextLine)) {\r\n                  allTimeLines.push(nextLine);\r\n                }\r\n              }\r\n              \r\n              const timeSlots = parseCourseTime(allTimeLines.join('\\n'));\r\n              const teacher = teachers.find(t => t.name.includes(teacherName) || teacherName.includes(t.name));\r\n              \r\n              courses.push({\r\n                name,\r\n                subject: department || '未知学科',\r\n                teacherId: teacher?.id || teachers[0]?.id || 'unknown',\r\n                credits,\r\n                fixedTimeSlots: timeSlots,\r\n                location: timeSlots[0]?.location,\r\n                weeks: `1-20周`,\r\n                teachers: [teacherName],\r\n                department,\r\n                campus\r\n              });\r\n            }\r\n          } catch (fallbackError) {\r\n            console.warn('后备解析也失败:', line, fallbackError);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return courses;\r\n  };\r\n\r\n  const copyExample = () => {\r\n    setInputText(exampleText);\r\n  };\r\n\r\n  // 渲染预览表格\r\n  const renderPreviewTable = () => (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h4 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <Eye className=\"h-5 w-5\" />\r\n            解析结果预览 ({parsedCourses.length} 门课程)\r\n          </h4>\r\n          {parsedCourses.some(c => c.hasError) && (\r\n            <div className=\"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n              <div className=\"flex items-start gap-2\">\r\n                <AlertTriangle className=\"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0\" />\r\n                <div className=\"text-sm text-yellow-800\">\r\n                  <p className=\"font-medium\">检测到数据问题：</p>\r\n                  <p>部分课程存在重复的时间安排，建议在导入前进行修正。</p>\r\n                  <button\r\n                    onClick={handleAutoFixDuplicates}\r\n                    className=\"mt-2 text-blue-600 hover:text-blue-800 underline text-sm\"\r\n                  >\r\n                    自动修复重复问题\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <button\r\n          onClick={handleBackToEdit}\r\n          className=\"btn-secondary flex items-center gap-2\"\r\n        >\r\n          <Edit3 className=\"h-4 w-4\" />\r\n          返回编辑\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-gray-50\">\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">课程名</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">教师</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">学院</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">校区</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">学分</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">时间安排</th>\r\n              <th className=\"border border-gray-300 px-3 py-2 text-center\">操作</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {parsedCourses.map((course) => (\r\n              <tr key={course.id} className=\"hover:bg-gray-50\">\r\n                <td className=\"border border-gray-300 px-3 py-2\">\r\n                  {course.isEditing ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={course.name}\r\n                      onChange={(e) => handleEditCourse(course.id, 'name', e.target.value)}\r\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\r\n                    />\r\n                  ) : (\r\n                    <span className=\"font-medium\">{course.name}</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2\">\r\n                  {course.isEditing ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={course.teachers.join(', ')}\r\n                      onChange={(e) => handleEditCourse(course.id, 'teachers', e.target.value.split(',').map(t => t.trim()))}\r\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\r\n                      placeholder=\"多个教师用逗号分隔\"\r\n                    />\r\n                  ) : (\r\n                    <span>{course.teachers.join(', ')}</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2\">\r\n                  {course.isEditing ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={course.department}\r\n                      onChange={(e) => handleEditCourse(course.id, 'department', e.target.value)}\r\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\r\n                    />\r\n                  ) : (\r\n                    <span>{course.department}</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2\">\r\n                  {course.isEditing ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={course.campus}\r\n                      onChange={(e) => handleEditCourse(course.id, 'campus', e.target.value)}\r\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\r\n                    />\r\n                  ) : (\r\n                    <span>{course.campus}</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2\">\r\n                  {course.isEditing ? (\r\n                    <input\r\n                      type=\"number\"\r\n                      value={course.credits}\r\n                      onChange={(e) => handleEditCourse(course.id, 'credits', parseInt(e.target.value) || 0)}\r\n                      className=\"w-20 p-1 border border-gray-300 rounded text-sm\"\r\n                      min=\"0\"\r\n                      max=\"10\"\r\n                    />\r\n                  ) : (\r\n                    <span>{course.credits}</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2 max-w-xs\">\r\n                  <div className=\"text-sm text-gray-700 overflow-hidden\">\r\n                    {course.timeDisplay}\r\n                    {course.hasError && course.errorMessage && (\r\n                      <div className=\"mt-1 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs flex items-start gap-1\">\r\n                        <AlertTriangle className=\"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0\" />\r\n                        <span>{course.errorMessage}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </td>\r\n                <td className=\"border border-gray-300 px-3 py-2 text-center\">\r\n                  <div className=\"flex items-center justify-center gap-1\">\r\n                    <button\r\n                      onClick={() => toggleEdit(course.id)}\r\n                      className={`p-1 rounded hover:bg-gray-100 ${\r\n                        course.isEditing ? 'text-green-600' : 'text-blue-600'\r\n                      }`}\r\n                      title={course.isEditing ? '保存' : '编辑'}\r\n                    >\r\n                      {course.isEditing ? <Save className=\"h-4 w-4\" /> : <Edit3 className=\"h-4 w-4\" />}\r\n                    </button>\r\n                    <button\r\n                      onClick={() => deleteCourse(course.id)}\r\n                      className=\"p-1 rounded hover:bg-gray-100 text-red-600\"\r\n                      title=\"删除\"\r\n                    >\r\n                      <X className=\"h-4 w-4\" />\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"flex gap-3 pt-4 border-t\">\r\n        <button\r\n          onClick={handleImportFromPreview}\r\n          disabled={parsedCourses.length === 0}\r\n          className=\"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          <Upload className=\"h-4 w-4\" />\r\n          确认导入 ({parsedCourses.length} 门课程)\r\n        </button>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"btn-secondary\"\r\n        >\r\n          取消\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <Upload className=\"h-5 w-5\" />\r\n            课程时间解析导入\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {previewMode ? renderPreviewTable() : (\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                课程数据\r\n              </label>\r\n              <div className=\"mb-2\">\r\n                <button\r\n                  onClick={copyExample}\r\n                  className=\"text-sm btn-secondary flex items-center gap-1\"\r\n                >\r\n                  <Copy className=\"h-3 w-3\" />\r\n                  使用示例数据\r\n                </button>\r\n              </div>\r\n              <textarea\r\n                value={inputText}\r\n                onChange={(e) => setInputText(e.target.value)}\r\n                placeholder=\"请粘贴课程数据，每行一门课程，支持多种格式和多行时间安排\"\r\n                className=\"w-full h-40 p-3 border border-gray-300 rounded-lg text-sm font-mono\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-medium text-blue-900 mb-2 flex items-center gap-2\">\r\n                <FileText className=\"h-4 w-4\" />\r\n                支持的数据格式\r\n              </h4>\r\n              <div className=\"text-sm text-blue-800 space-y-2\">\r\n                <div>\r\n                  <p className=\"font-semibold\">格式1（标准格式）：</p>\r\n                  <p>课程名 &nbsp; 教师 &nbsp; 学院 &nbsp; 校区 &nbsp; 学时 &nbsp; 学分 &nbsp; 时间安排</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold\">格式2（新格式）：</p>\r\n                  <p>课程名 &nbsp; 学分 &nbsp; 考试方式 &nbsp; 学院 &nbsp; 教师 &nbsp; 校区 &nbsp; 时间安排</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"font-semibold\">时间格式示例：</p>\r\n                  <p>• 1-5周，星期一第3-4节 (立人楼B417)</p>\r\n                  <p>• 7-10周，星期一第3-4节 (立人楼B417)</p>\r\n                  <p>• <strong>支持多行时间数据</strong>，自动识别续行</p>\r\n                  <p>• 自动识别星期和节次，支持连续节次</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {importResult && (\r\n              <div className={`p-4 rounded-lg flex items-start gap-3 ${\r\n                importResult.success \r\n                  ? 'bg-green-50 border border-green-200' \r\n                  : 'bg-red-50 border border-red-200'\r\n              }`}>\r\n                {importResult.success ? (\r\n                  <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\" />\r\n                ) : (\r\n                  <AlertCircle className=\"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0\" />\r\n                )}\r\n                <div>\r\n                  <p className={`font-medium ${\r\n                    importResult.success ? 'text-green-900' : 'text-red-900'\r\n                  }`}>\r\n                    {importResult.message}\r\n                  </p>\r\n                  {importResult.count && (\r\n                    <p className=\"text-green-700 text-sm mt-1\">\r\n                      成功导入 {importResult.count} 门课程\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3 pt-4\">\r\n              <button\r\n                onClick={handlePreview}\r\n                disabled={!inputText.trim()}\r\n                className=\"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <Eye className=\"h-4 w-4\" />\r\n                解析预览\r\n              </button>\r\n              <button\r\n                onClick={handleDirectImport}\r\n                disabled={!inputText.trim()}\r\n                className=\"btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <Upload className=\"h-4 w-4\" />\r\n                直接导入\r\n              </button>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"btn-secondary\"\r\n              >\r\n                取消\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}