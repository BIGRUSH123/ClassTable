{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\classtable\\\\src\\\\components\\\\CourseTimeParser.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Upload, FileText, AlertCircle, CheckCircle, Copy, Edit3, Save, X, Eye, AlertTriangle } from 'lucide-react';\nimport { parseCourseInfo, parseCourseTime, deduplicateTimeSlots } from '../utils/courseTimeParser';\n\n// è§£æåçš„è¯¾ç¨‹æ•°æ®é¢„è§ˆæ¥å£\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CourseTimeParser = ({\n  teachers,\n  onImportCourses,\n  onAddTeacher,\n  onClose\n}) => {\n  _s();\n  const [inputText, setInputText] = useState('');\n  const [previewMode, setPreviewMode] = useState(false);\n  const [parsedCourses, setParsedCourses] = useState([]);\n  const [importResult, setImportResult] = useState(null);\n\n  // ç¤ºä¾‹æ•°æ®\n  const exampleText = `æœ‰é™è‡ªåŠ¨æœºç†è®º\té™ˆæ–‡å®‡,ä½™ç››å­£\tè®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ï¼ˆç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢ï¼‰\tæ¸…æ°´æ²³\t32\t2\t1-6å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬5-6èŠ‚ æ˜ŸæœŸä¸‰ç¬¬5-6èŠ‚ (ç«‹äººæ¥¼B411)\n\t\t\t\t\t\t7-8å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬5-6èŠ‚ æ˜ŸæœŸä¸‰ç¬¬5-6èŠ‚ (ç«‹äººæ¥¼B411)\né«˜çº§è½¯ä»¶å¼€å‘æŠ€æœ¯\tå­™æ˜\tè®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢\tæ¸…æ°´æ²³\t16\t1\t1-8å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬9-11èŠ‚ (ç«‹äººæ¥¼B402)\næ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä¸å®è·µ10ç­\t2\tè€ƒè¯•\té©¬å…‹æ€ä¸»ä¹‰å­¦é™¢\tå°è\tæ¸…æ°´æ²³\t1-5å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n7-10å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n1-4å‘¨ï¼Œæ˜ŸæœŸå››ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n6-10å‘¨ï¼Œæ˜ŸæœŸå››ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)`;\n\n  // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\n  const formatTimeDisplay = timeSlots => {\n    if (timeSlots.length === 0) return 'æ— æ—¶é—´å®‰æ’';\n    return timeSlots.map(slot => {\n      const dayNames = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];\n      const dayName = dayNames[slot.dayOfWeek] || 'æœªçŸ¥';\n      const timeRange = slot.timeSlotIds.length > 1 ? `ç¬¬${slot.timeSlotIds[0]}-${slot.timeSlotIds[slot.timeSlotIds.length - 1]}èŠ‚` : `ç¬¬${slot.timeSlotIds[0]}èŠ‚`;\n      const location = slot.location ? ` (${slot.location})` : '';\n      const weeks = slot.weeks && slot.weeks.length > 0 ? slot.weeks.map(w => w.start === w.end ? `${w.start}å‘¨` : `${w.start}-${w.end}å‘¨`).join('ï¼Œ') : 'å…¨å­¦æœŸ';\n      return `${weeks}ï¼Œ${dayName}${timeRange}${location}`;\n    }).join('ï¼›');\n  };\n\n  // æ£€æµ‹é‡å¤æ—¶é—´æ®µ\n  const findDuplicateTimeSlots = timeSlots => {\n    const duplicates = [];\n    const seen = new Set();\n    for (const slot of timeSlots) {\n      for (const timeSlotId of slot.timeSlotIds) {\n        const key = `å‘¨${['', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'][slot.dayOfWeek]}ç¬¬${timeSlotId}èŠ‚`;\n        if (seen.has(key)) {\n          if (!duplicates.includes(key)) {\n            duplicates.push(key);\n          }\n        } else {\n          seen.add(key);\n        }\n      }\n    }\n    return duplicates;\n  };\n\n  // æ£€æŸ¥è¯¾ç¨‹é—´çš„æ—¶é—´å†²çª\n  const checkCrossCoursesConflicts = courses => {\n    const conflicts = {};\n\n    // ä¸ºæ¯ä¸ªæ—¶é—´æ®µåˆ›å»ºæ˜ å°„\n    for (let i = 0; i < courses.length; i++) {\n      const courseA = courses[i];\n      for (const slotA of courseA.timeSlots) {\n        for (const timeSlotId of slotA.timeSlotIds) {\n          // æ£€æŸ¥å…¶ä»–è¯¾ç¨‹çš„ç›¸åŒæ—¶é—´æ®µ\n          for (let j = i + 1; j < courses.length; j++) {\n            const courseB = courses[j];\n            for (const slotB of courseB.timeSlots) {\n              if (slotA.dayOfWeek === slotB.dayOfWeek && slotB.timeSlotIds.includes(timeSlotId) && hasWeekOverlap(slotA.weeks, slotB.weeks)) {\n                var _courseA$errorMessage, _courseB$errorMessage;\n                const conflictKey = `${slotA.dayOfWeek}-${timeSlotId}`;\n                const dayName = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][slotA.dayOfWeek];\n                const timeKey = `${dayName}ç¬¬${timeSlotId}èŠ‚`;\n                if (!conflicts[conflictKey]) {\n                  conflicts[conflictKey] = [];\n                }\n\n                // æ·»åŠ å†²çªçš„è¯¾ç¨‹ï¼ˆé¿å…é‡å¤ï¼‰\n                if (!conflicts[conflictKey].find(c => c.id === courseA.id)) {\n                  conflicts[conflictKey].push(courseA);\n                }\n                if (!conflicts[conflictKey].find(c => c.id === courseB.id)) {\n                  conflicts[conflictKey].push(courseB);\n                }\n\n                // æ ‡è®°ä¸¤é—¨è¯¾ç¨‹éƒ½æœ‰é”™è¯¯\n                if (!courseA.hasError) {\n                  courseA.hasError = true;\n                  courseA.errorMessage = `ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                } else if (!((_courseA$errorMessage = courseA.errorMessage) !== null && _courseA$errorMessage !== void 0 && _courseA$errorMessage.includes('æ—¶é—´å†²çª'))) {\n                  courseA.errorMessage += `; ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                }\n                if (!courseB.hasError) {\n                  courseB.hasError = true;\n                  courseB.errorMessage = `ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                } else if (!((_courseB$errorMessage = courseB.errorMessage) !== null && _courseB$errorMessage !== void 0 && _courseB$errorMessage.includes('æ—¶é—´å†²çª'))) {\n                  courseB.errorMessage += `; ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return conflicts;\n  };\n\n  // é¢„è§ˆè§£æç»“æœ\n  const handlePreview = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: 'è¯·è¾“å…¥è¯¾ç¨‹æ•°æ®'\n      });\n      return;\n    }\n    try {\n      const courses = parseCourseText(inputText);\n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: 'æœªèƒ½è§£æå‡ºä»»ä½•è¯¾ç¨‹æ•°æ®ï¼Œè¯·æ£€æŸ¥æ ¼å¼'\n        });\n        return;\n      }\n\n      // è½¬æ¢ä¸ºé¢„è§ˆæ ¼å¼ï¼Œå¹¶æ£€æŸ¥å†…éƒ¨é‡å¤\n      const previews = courses.map((course, index) => {\n        // æ£€æŸ¥è¯¥è¯¾ç¨‹å†…éƒ¨æ˜¯å¦æœ‰é‡å¤çš„æ—¶é—´æ®µ\n        const duplicateSlots = findDuplicateTimeSlots(course.fixedTimeSlots);\n        const hasInternalDuplicates = duplicateSlots.length > 0;\n        return {\n          id: `preview_${index}`,\n          name: course.name,\n          teachers: course.teachers || [],\n          department: course.department || 'æœªçŸ¥å­¦é™¢',\n          campus: course.campus || 'æœªçŸ¥æ ¡åŒº',\n          credits: course.credits,\n          timeSlots: course.fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(course.fixedTimeSlots),\n          isEditing: false,\n          hasError: hasInternalDuplicates,\n          errorMessage: hasInternalDuplicates ? `æ£€æµ‹åˆ°é‡å¤æ—¶é—´æ®µ: ${duplicateSlots.join(', ')}` : undefined\n        };\n      });\n\n      // æ£€æŸ¥è¯¾ç¨‹é—´çš„æ—¶é—´å†²çª\n      checkCrossCoursesConflicts(previews);\n      setParsedCourses(previews);\n      setPreviewMode(true);\n      setImportResult(null);\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `è§£æå¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // æ£€æŸ¥è¯¾ç¨‹æ˜¯å¦é‡å¤\n  const checkDuplicateCourses = (coursesToImport, existingCourses) => {\n    const duplicates = [];\n    const warnings = [];\n    for (const newCourse of coursesToImport) {\n      // æ£€æŸ¥ç›¸åŒè¯¾ç¨‹åå’Œæ•™å¸ˆçš„é‡å¤\n      const duplicateName = existingCourses.find(existing => existing.name === newCourse.name && existing.teacherId === newCourse.teacherId);\n      if (duplicateName) {\n        duplicates.push({\n          course: newCourse,\n          reason: `ç›¸åŒè¯¾ç¨‹åå’Œæ•™å¸ˆ: ${newCourse.name}`\n        });\n        continue;\n      }\n\n      // æ£€æŸ¥æ—¶é—´å†²çª\n      for (const existingCourse of existingCourses) {\n        const hasTimeConflict = newCourse.fixedTimeSlots.some(newSlot => existingCourse.fixedTimeSlots.some(existingSlot => newSlot.dayOfWeek === existingSlot.dayOfWeek && newSlot.timeSlotIds.some(id => existingSlot.timeSlotIds.includes(id)) && hasWeekOverlap(newSlot.weeks, existingSlot.weeks)));\n        if (hasTimeConflict) {\n          warnings.push(`è¯¾ç¨‹ \"${newCourse.name}\" ä¸ç°æœ‰è¯¾ç¨‹ \"${existingCourse.name}\" å­˜åœ¨æ—¶é—´å†²çª`);\n        }\n      }\n    }\n    return {\n      duplicates,\n      warnings\n    };\n  };\n\n  // æ£€æŸ¥å‘¨æ¬¡æ˜¯å¦é‡å \n  const hasWeekOverlap = (weeks1, weeks2) => {\n    if (!weeks1 || !weeks2) return true; // å¦‚æœæ²¡æœ‰æŒ‡å®šå‘¨æ¬¡ï¼Œå‡è®¾é‡å \n\n    return weeks1.some(w1 => weeks2.some(w2 => w1.start <= w2.end && w1.end >= w2.start));\n  };\n\n  // ä»é¢„è§ˆç›´æ¥å¯¼å…¥\n  const handleImportFromPreview = () => {\n    try {\n      const courses = parsedCourses.map(preview => {\n        var _preview$timeSlots$;\n        // æ”¹è¿›çš„æ•™å¸ˆåŒ¹é…é€»è¾‘\n        const teacher = findBestMatchingTeacher(preview.teachers, teachers);\n        return {\n          name: preview.name,\n          subject: preview.department,\n          teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || getOrCreateTeacher(preview.teachers[0] || 'æœªçŸ¥æ•™å¸ˆ'),\n          credits: preview.credits,\n          fixedTimeSlots: preview.timeSlots,\n          location: (_preview$timeSlots$ = preview.timeSlots[0]) === null || _preview$timeSlots$ === void 0 ? void 0 : _preview$timeSlots$.location,\n          weeks: `1-20å‘¨`,\n          teachers: preview.teachers,\n          department: preview.department,\n          campus: preview.campus\n        };\n      });\n\n      // è·å–ç°æœ‰è¯¾ç¨‹è¿›è¡Œé‡å¤æ£€æŸ¥\n      // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä¼ å…¥ç°æœ‰è¯¾ç¨‹ï¼Œä½†ç»„ä»¶æ¥å£ä¸­æ²¡æœ‰ï¼Œæ‰€ä»¥å…ˆè·³è¿‡æ£€æŸ¥\n      // const { duplicates, warnings } = checkDuplicateCourses(courses, existingCourses);\n\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: 'è¯¾ç¨‹å¯¼å…¥æˆåŠŸï¼',\n        count: courses.length\n      });\n      setPreviewMode(false);\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `å¯¼å…¥å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // ç›´æ¥å¯¼å…¥ï¼ˆè·³è¿‡é¢„è§ˆï¼‰\n  const handleDirectImport = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: 'è¯·è¾“å…¥è¯¾ç¨‹æ•°æ®'\n      });\n      return;\n    }\n    try {\n      const courses = parseCourseText(inputText);\n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: 'æœªèƒ½è§£æå‡ºä»»ä½•è¯¾ç¨‹æ•°æ®ï¼Œè¯·æ£€æŸ¥æ ¼å¼'\n        });\n        return;\n      }\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: 'è¯¾ç¨‹å¯¼å…¥æˆåŠŸï¼',\n        count: courses.length\n      });\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `å¯¼å…¥å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // ç¼–è¾‘è¯¾ç¨‹ä¿¡æ¯\n  const handleEditCourse = (id, field, value) => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.id === id) {\n        const updated = {\n          ...course,\n          [field]: value\n        };\n\n        // å¦‚æœä¿®æ”¹äº†æ—¶é—´ç›¸å…³å­—æ®µï¼Œé‡æ–°ç”Ÿæˆæ—¶é—´æ˜¾ç¤º\n        if (field === 'timeSlots') {\n          updated.timeDisplay = formatTimeDisplay(value);\n        }\n        return updated;\n      }\n      return course;\n    }));\n  };\n\n  // åˆ‡æ¢ç¼–è¾‘æ¨¡å¼\n  const toggleEdit = id => {\n    setParsedCourses(prev => prev.map(course => course.id === id ? {\n      ...course,\n      isEditing: !course.isEditing\n    } : course));\n  };\n\n  // åˆ é™¤è¯¾ç¨‹\n  const deleteCourse = id => {\n    setParsedCourses(prev => prev.filter(course => course.id !== id));\n  };\n\n  // è¿”å›ç¼–è¾‘æ¨¡å¼\n  const handleBackToEdit = () => {\n    setPreviewMode(false);\n    setImportResult(null);\n  };\n\n  // è‡ªåŠ¨ä¿®å¤é‡å¤æ—¶é—´æ®µ\n  const handleAutoFixDuplicates = () => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.hasError) {\n        // ä½¿ç”¨è§£æå™¨çš„å»é‡åŠŸèƒ½é‡æ–°å¤„ç†æ—¶é—´æ®µ\n        const fixedTimeSlots = deduplicateTimeSlots(course.timeSlots);\n        return {\n          ...course,\n          timeSlots: fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(fixedTimeSlots),\n          hasError: false,\n          errorMessage: undefined\n        };\n      }\n      return course;\n    }));\n  };\n\n  // æ”¹è¿›çš„æ•™å¸ˆåŒ¹é…é€»è¾‘\n  const findBestMatchingTeacher = (courseTeachers, availableTeachers) => {\n    if (!courseTeachers || courseTeachers.length === 0) return null;\n    for (const teacherName of courseTeachers) {\n      const cleanName = teacherName.trim();\n\n      // ç²¾ç¡®åŒ¹é…\n      let match = availableTeachers.find(t => t.name === cleanName);\n      if (match) return match;\n\n      // åŒ…å«åŒ¹é…\n      match = availableTeachers.find(t => t.name.includes(cleanName) || cleanName.includes(t.name));\n      if (match) return match;\n\n      // æœ€åä¸¤ä¸ªå­—ç¬¦åŒ¹é…ï¼ˆå¤„ç†å§“åç®€åŒ–çš„æƒ…å†µï¼‰\n      if (cleanName.length >= 2) {\n        const shortName = cleanName.slice(-2);\n        match = availableTeachers.find(t => t.name.includes(shortName));\n        if (match) return match;\n      }\n    }\n    return null;\n  };\n\n  // åˆ›å»ºæˆ–è·å–æ•™å¸ˆID\n  const getOrCreateTeacher = teacherName => {\n    const cleanName = teacherName.trim();\n\n    // å…ˆå°è¯•åœ¨ç°æœ‰æ•™å¸ˆä¸­æŸ¥æ‰¾\n    const existingTeacher = findBestMatchingTeacher([cleanName], teachers);\n    if (existingTeacher) {\n      return existingTeacher.id;\n    }\n\n    // å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¸”æœ‰ onAddTeacher å›è°ƒï¼Œåˆ›å»ºæ–°æ•™å¸ˆ\n    if (onAddTeacher && cleanName !== 'æœªçŸ¥æ•™å¸ˆ' && cleanName) {\n      try {\n        const newTeacher = {\n          name: cleanName,\n          subjects: [],\n          unavailableSlots: []\n        };\n        onAddTeacher(newTeacher);\n\n        // ç”Ÿæˆä¸€ä¸ªä¸´æ—¶IDï¼Œå®é™…ä¸Šæ–°æ•™å¸ˆä¼šæœ‰è‡ªå·±çš„ID\n        return `new_${cleanName.replace(/\\s/g, '_')}_${Date.now()}`;\n      } catch (error) {\n        console.warn('åˆ›å»ºæ•™å¸ˆå¤±è´¥:', error);\n      }\n    }\n\n    // æœ€åå›é€€ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªæ•™å¸ˆçš„IDæˆ–unknown\n    return teachers.length > 0 ? teachers[0].id : 'unknown';\n  };\n\n  // è¯¦ç»†å†²çªåˆ†æ\n  const handleAnalyzeConflicts = () => {\n    const conflictAnalysis = analyzeDetailedConflicts(parsedCourses);\n    let message = \"ğŸ“Š è¯¦ç»†å†²çªåˆ†ææŠ¥å‘Š:\\n\\n\";\n    if (conflictAnalysis.timeConflicts.length > 0) {\n      message += \"â° æ—¶é—´å†²çª:\\n\";\n      conflictAnalysis.timeConflicts.forEach((conflict, index) => {\n        message += `${index + 1}. ${conflict.timeSlot}:\\n`;\n        conflict.courses.forEach(course => {\n          const weeks = course.timeSlots.filter(slot => slot.dayOfWeek === conflict.dayOfWeek && slot.timeSlotIds.includes(conflict.timeSlotId)).map(slot => {\n            var _slot$weeks;\n            return ((_slot$weeks = slot.weeks) === null || _slot$weeks === void 0 ? void 0 : _slot$weeks.map(w => `${w.start}-${w.end}å‘¨`).join(',')) || 'å…¨å­¦æœŸ';\n          }).join(',');\n          message += `   - ${course.name} (${course.teachers.join(',')}) [${weeks}]\\n`;\n        });\n        message += \"\\n\";\n      });\n    }\n    if (conflictAnalysis.suggestions.length > 0) {\n      message += \"ğŸ’¡ å»ºè®®è§£å†³æ–¹æ¡ˆ:\\n\";\n      conflictAnalysis.suggestions.forEach((suggestion, index) => {\n        message += `${index + 1}. ${suggestion}\\n`;\n      });\n    }\n    alert(message);\n  };\n\n  // åˆ†æè¯¦ç»†å†²çªä¿¡æ¯\n  const analyzeDetailedConflicts = courses => {\n    const timeConflicts = [];\n    const suggestions = [];\n\n    // æ£€æŸ¥æ—¶é—´å†²çª\n    const timeMap = new Map();\n    courses.forEach(course => {\n      course.timeSlots.forEach(slot => {\n        slot.timeSlotIds.forEach(timeSlotId => {\n          const key = `${slot.dayOfWeek}-${timeSlotId}`;\n          if (!timeMap.has(key)) {\n            timeMap.set(key, []);\n          }\n          timeMap.get(key).push(course);\n        });\n      });\n    });\n    timeMap.forEach((conflictCourses, timeKey) => {\n      if (conflictCourses.length > 1) {\n        const [dayOfWeek, timeSlotId] = timeKey.split('-');\n        const dayName = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][parseInt(dayOfWeek)];\n\n        // æ£€æŸ¥æ˜¯å¦çœŸçš„å†²çªï¼ˆå‘¨æ¬¡é‡å ï¼‰\n        const realConflicts = [];\n        for (let i = 0; i < conflictCourses.length; i++) {\n          for (let j = i + 1; j < conflictCourses.length; j++) {\n            const courseA = conflictCourses[i];\n            const courseB = conflictCourses[j];\n            const slotA = courseA.timeSlots.find(s => s.dayOfWeek === parseInt(dayOfWeek) && s.timeSlotIds.includes(timeSlotId));\n            const slotB = courseB.timeSlots.find(s => s.dayOfWeek === parseInt(dayOfWeek) && s.timeSlotIds.includes(timeSlotId));\n            if (slotA && slotB && hasWeekOverlap(slotA.weeks, slotB.weeks)) {\n              if (!realConflicts.includes(courseA)) realConflicts.push(courseA);\n              if (!realConflicts.includes(courseB)) realConflicts.push(courseB);\n            }\n          }\n        }\n        if (realConflicts.length > 1) {\n          timeConflicts.push({\n            timeSlot: `${dayName}ç¬¬${timeSlotId}èŠ‚`,\n            dayOfWeek: parseInt(dayOfWeek),\n            timeSlotId,\n            courses: realConflicts\n          });\n\n          // ç”Ÿæˆè§£å†³å»ºè®®\n          if (realConflicts.length === 2) {\n            suggestions.push(`å»ºè®®è°ƒæ•´ \"${realConflicts[1].name}\" çš„ä¸Šè¯¾æ—¶é—´ï¼Œé¿å¼€ ${dayName}ç¬¬${timeSlotId}èŠ‚`);\n          } else {\n            suggestions.push(`${dayName}ç¬¬${timeSlotId}èŠ‚æœ‰${realConflicts.length}é—¨è¯¾ç¨‹å†²çªï¼Œå»ºè®®é‡æ–°å®‰æ’æ—¶é—´`);\n          }\n        }\n      }\n    });\n    return {\n      timeConflicts,\n      suggestions\n    };\n  };\n\n  // è§£æè¯¾ç¨‹æ–‡æœ¬\n  const parseCourseText = text => {\n    const courses = [];\n\n    // é¦–å…ˆæŒ‰åŒæ¢è¡Œæˆ–å¤šä¸ªè¿ç»­æ¢è¡Œåˆ†å‰²ï¼Œå¤„ç†å¯èƒ½çš„å¤šä¸ªè¯¾ç¨‹è®°å½•\n    const courseBlocks = text.trim().split(/\\n\\s*\\n/).filter(block => block.trim());\n\n    // å¦‚æœæ²¡æœ‰æ˜æ˜¾çš„åˆ†å—ï¼Œå°è¯•æŒ‰è¡Œå¤„ç†ï¼Œä½†è¦è€ƒè™‘å¤šè¡Œæ•°æ®\n    const blocksToProcess = courseBlocks.length > 1 ? courseBlocks : [text.trim()];\n    for (const block of blocksToProcess) {\n      try {\n        var _teachers$, _courseInfo$timeSlots;\n        // å¯¹äºæ¯ä¸ªå—ï¼Œå¯èƒ½åŒ…å«ä¸€ä¸ªè¯¾ç¨‹çš„å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…æ‹¬å¤šè¡Œæ—¶é—´æ•°æ®ï¼‰\n        const courseInfo = parseCourseInfo(block);\n\n        // æŸ¥æ‰¾å¯¹åº”çš„æ•™å¸ˆID\n        const teacherNames = courseInfo.teachers;\n        const teacher = teachers.find(t => teacherNames.some(name => t.name.includes(name) || name.includes(t.name)));\n        courses.push({\n          name: courseInfo.name,\n          subject: courseInfo.department || 'æœªçŸ¥å­¦ç§‘',\n          teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || ((_teachers$ = teachers[0]) === null || _teachers$ === void 0 ? void 0 : _teachers$.id) || 'unknown',\n          credits: courseInfo.credits || 2,\n          fixedTimeSlots: courseInfo.timeSlots,\n          location: (_courseInfo$timeSlots = courseInfo.timeSlots[0]) === null || _courseInfo$timeSlots === void 0 ? void 0 : _courseInfo$timeSlots.location,\n          weeks: `1-20å‘¨`,\n          // é»˜è®¤å…¨å­¦æœŸ\n          teachers: courseInfo.teachers,\n          department: courseInfo.department,\n          campus: courseInfo.campus\n        });\n      } catch (error) {\n        console.warn('è§£æè¯¾ç¨‹å—å¤±è´¥:', block, error);\n\n        // å°è¯•æŒ‰è¡Œå¤„ç†ä½œä¸ºåå¤‡æ–¹æ¡ˆ\n        const lines = block.split('\\n').filter(line => line.trim());\n        for (const line of lines) {\n          // åªå¤„ç†åŒ…å«åˆ¶è¡¨ç¬¦çš„è¡Œï¼ˆä¸»è¦è¯¾ç¨‹ä¿¡æ¯ï¼‰\n          if (!line.includes('\\t')) continue;\n          try {\n            const parts = line.split('\\t').map(part => part.trim());\n            if (parts.length >= 6) {\n              var _teachers$2, _timeSlots$;\n              // å°è¯•ä¸¤ç§æ ¼å¼\n              let name;\n              let teacherName;\n              let department;\n              let campus;\n              let credits;\n              let scheduleText;\n\n              // æ£€æµ‹æ ¼å¼\n              const secondFieldIsNumber = /^\\d+$/.test(parts[1]);\n              if (secondFieldIsNumber && parts.length >= 6) {\n                // æ ¼å¼1: è¯¾ç¨‹å\tå­¦åˆ†\tè€ƒè¯•æ–¹å¼\tå­¦é™¢\tæ•™å¸ˆ\tæ ¡åŒº\tæ—¶é—´å®‰æ’...\n                [name,,, department, teacherName, campus, ...scheduleText] = parts;\n                credits = parseInt(parts[1]) || 2;\n              } else {\n                // æ ¼å¼2: è¯¾ç¨‹å\tæ•™å¸ˆ\tå­¦é™¢\tæ ¡åŒº\tå­¦æ—¶\tå­¦åˆ†\tæ—¶é—´å®‰æ’...\n                [name, teacherName, department, campus,,, ...scheduleText] = parts;\n                credits = parseInt(parts[5]) || 2;\n              }\n\n              // æ”¶é›†è¯¥è¯¾ç¨‹çš„æ‰€æœ‰æ—¶é—´ä¿¡æ¯ï¼ˆåŒ…æ‹¬åç»­è¡Œï¼‰\n              const allTimeLines = [scheduleText.join('\\t')];\n              const currentLineIndex = lines.indexOf(line);\n              for (let i = currentLineIndex + 1; i < lines.length; i++) {\n                const nextLine = lines[i];\n                if (nextLine.includes('\\t')) break; // é‡åˆ°æ–°çš„è¯¾ç¨‹è®°å½•\n                if (/\\d+[-â€“]?\\d*å‘¨|æ˜ŸæœŸ[ä¸€äºŒä¸‰å››äº”å…­æ—¥]|ç¬¬\\d+/.test(nextLine)) {\n                  allTimeLines.push(nextLine);\n                }\n              }\n              const timeSlots = parseCourseTime(allTimeLines.join('\\n'));\n              const teacher = teachers.find(t => t.name.includes(teacherName) || teacherName.includes(t.name));\n              courses.push({\n                name,\n                subject: department || 'æœªçŸ¥å­¦ç§‘',\n                teacherId: (teacher === null || teacher === void 0 ? void 0 : teacher.id) || ((_teachers$2 = teachers[0]) === null || _teachers$2 === void 0 ? void 0 : _teachers$2.id) || 'unknown',\n                credits,\n                fixedTimeSlots: timeSlots,\n                location: (_timeSlots$ = timeSlots[0]) === null || _timeSlots$ === void 0 ? void 0 : _timeSlots$.location,\n                weeks: `1-20å‘¨`,\n                teachers: [teacherName],\n                department,\n                campus\n              });\n            }\n          } catch (fallbackError) {\n            console.warn('åå¤‡è§£æä¹Ÿå¤±è´¥:', line, fallbackError);\n          }\n        }\n      }\n    }\n    return courses;\n  };\n  const copyExample = () => {\n    setInputText(exampleText);\n  };\n\n  // æ¸²æŸ“é¢„è§ˆè¡¨æ ¼\n  const renderPreviewTable = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 13\n          }, this), \"\\u89E3\\u6790\\u7ED3\\u679C\\u9884\\u89C8 (\", parsedCourses.length, \" \\u95E8\\u8BFE\\u7A0B)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 11\n        }, this), parsedCourses.some(c => c.hasError) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              className: \"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-yellow-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: \"\\u68C0\\u6D4B\\u5230\\u6570\\u636E\\u95EE\\u9898\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-1 space-y-1\",\n                children: parsedCourses.filter(c => c.hasError).map(course => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-yellow-100 rounded px-2 py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [course.name, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 678,\n                    columnNumber: 25\n                  }, this), \" \", course.errorMessage]\n                }, course.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 flex gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleAutoFixDuplicates,\n                  className: \"text-blue-600 hover:text-blue-800 underline text-sm\",\n                  children: \"\\u81EA\\u52A8\\u4FEE\\u590D\\u91CD\\u590D\\u95EE\\u9898\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleAnalyzeConflicts,\n                  className: \"text-purple-600 hover:text-purple-800 underline text-sm\",\n                  children: \"\\u8BE6\\u7EC6\\u51B2\\u7A81\\u5206\\u6790\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 689,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBackToEdit,\n        className: \"btn-secondary flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Edit3, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 11\n        }, this), \"\\u8FD4\\u56DE\\u7F16\\u8F91\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 701,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full border-collapse border border-gray-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u8BFE\\u7A0B\\u540D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u6559\\u5E08\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u5B66\\u9662\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u6821\\u533A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u5B66\\u5206\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-left\",\n              children: \"\\u65F6\\u95F4\\u5B89\\u6392\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border border-gray-300 px-3 py-2 text-center\",\n              children: \"\\u64CD\\u4F5C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: parsedCourses.map(course => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"hover:bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.name,\n                onChange: e => handleEditCourse(course.id, 'name', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: course.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.teachers.join(', '),\n                onChange: e => handleEditCourse(course.id, 'teachers', e.target.value.split(',').map(t => t.trim())),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\",\n                placeholder: \"\\u591A\\u4E2A\\u6559\\u5E08\\u7528\\u9017\\u53F7\\u5206\\u9694\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.teachers.join(', ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.department,\n                onChange: e => handleEditCourse(course.id, 'department', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 753,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.department\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: course.campus,\n                onChange: e => handleEditCourse(course.id, 'campus', e.target.value),\n                className: \"w-full p-1 border border-gray-300 rounded text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 765,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.campus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 763,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2\",\n              children: course.isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: course.credits,\n                onChange: e => handleEditCourse(course.id, 'credits', parseInt(e.target.value) || 0),\n                className: \"w-20 p-1 border border-gray-300 rounded text-sm\",\n                min: \"0\",\n                max: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                children: course.credits\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2 max-w-xs\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-700 overflow-hidden\",\n                children: [course.timeDisplay, course.hasError && course.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-1 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs flex items-start gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                    className: \"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 794,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: course.errorMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 795,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 793,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"border border-gray-300 px-3 py-2 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleEdit(course.id),\n                  className: `p-1 rounded hover:bg-gray-100 ${course.isEditing ? 'text-green-600' : 'text-blue-600'}`,\n                  title: course.isEditing ? 'ä¿å­˜' : 'ç¼–è¾‘',\n                  children: course.isEditing ? /*#__PURE__*/_jsxDEV(Save, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 809,\n                    columnNumber: 43\n                  }, this) : /*#__PURE__*/_jsxDEV(Edit3, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 809,\n                    columnNumber: 74\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 802,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deleteCourse(course.id),\n                  className: \"p-1 rounded hover:bg-gray-100 text-red-600\",\n                  title: \"\\u5220\\u9664\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 816,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 811,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 801,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 800,\n              columnNumber: 17\n            }, this)]\n          }, course.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-3 pt-4 border-t\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleImportFromPreview,\n        disabled: parsedCourses.length === 0,\n        className: \"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 11\n        }, this), \"\\u786E\\u8BA4\\u5BFC\\u5165 (\", parsedCourses.length, \" \\u95E8\\u8BFE\\u7A0B)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 827,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"btn-secondary\",\n        children: \"\\u53D6\\u6D88\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 835,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 662,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 850,\n            columnNumber: 13\n          }, this), \"\\u8BFE\\u7A0B\\u65F6\\u95F4\\u89E3\\u6790\\u5BFC\\u5165\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 849,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 848,\n        columnNumber: 9\n      }, this), previewMode ? renderPreviewTable() : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"\\u8BFE\\u7A0B\\u6570\\u636E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 864,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: copyExample,\n              className: \"text-sm btn-secondary flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(Copy, {\n                className: \"h-3 w-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 17\n              }, this), \"\\u4F7F\\u7528\\u793A\\u4F8B\\u6570\\u636E\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 867,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: inputText,\n            onChange: e => setInputText(e.target.value),\n            placeholder: \"\\u8BF7\\u7C98\\u8D34\\u8BFE\\u7A0B\\u6570\\u636E\\uFF0C\\u6BCF\\u884C\\u4E00\\u95E8\\u8BFE\\u7A0B\\uFF0C\\u652F\\u6301\\u591A\\u79CD\\u683C\\u5F0F\\u548C\\u591A\\u884C\\u65F6\\u95F4\\u5B89\\u6392\",\n            className: \"w-full h-40 p-3 border border-gray-300 rounded-lg text-sm font-mono\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-blue-900 mb-2 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 886,\n              columnNumber: 15\n            }, this), \"\\u652F\\u6301\\u7684\\u6570\\u636E\\u683C\\u5F0F\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-800 space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u683C\\u5F0F1\\uFF08\\u6807\\u51C6\\u683C\\u5F0F\\uFF09\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BFE\\u7A0B\\u540D \\xA0 \\u6559\\u5E08 \\xA0 \\u5B66\\u9662 \\xA0 \\u6821\\u533A \\xA0 \\u5B66\\u65F6 \\xA0 \\u5B66\\u5206 \\xA0 \\u65F6\\u95F4\\u5B89\\u6392\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 890,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u683C\\u5F0F2\\uFF08\\u65B0\\u683C\\u5F0F\\uFF09\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BFE\\u7A0B\\u540D \\xA0 \\u5B66\\u5206 \\xA0 \\u8003\\u8BD5\\u65B9\\u5F0F \\xA0 \\u5B66\\u9662 \\xA0 \\u6559\\u5E08 \\xA0 \\u6821\\u533A \\xA0 \\u65F6\\u95F4\\u5B89\\u6392\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 894,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: \"\\u65F6\\u95F4\\u683C\\u5F0F\\u793A\\u4F8B\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 899,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 1-5\\u5468\\uFF0C\\u661F\\u671F\\u4E00\\u7B2C3-4\\u8282 (\\u7ACB\\u4EBA\\u697CB417)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 7-10\\u5468\\uFF0C\\u661F\\u671F\\u4E00\\u7B2C3-4\\u8282 (\\u7ACB\\u4EBA\\u697CB417)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 901,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u652F\\u6301\\u591A\\u884C\\u65F6\\u95F4\\u6570\\u636E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 24\n                }, this), \"\\uFF0C\\u81EA\\u52A8\\u8BC6\\u522B\\u7EED\\u884C\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 902,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u2022 \\u81EA\\u52A8\\u8BC6\\u522B\\u661F\\u671F\\u548C\\u8282\\u6B21\\uFF0C\\u652F\\u6301\\u8FDE\\u7EED\\u8282\\u6B21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 898,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 11\n        }, this), importResult && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `p-4 rounded-lg flex items-start gap-3 ${importResult.success ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`,\n          children: [importResult.success ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: \"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 917,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: `font-medium ${importResult.success ? 'text-green-900' : 'text-red-900'}`,\n              children: importResult.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 920,\n              columnNumber: 17\n            }, this), importResult.count && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-green-700 text-sm mt-1\",\n              children: [\"\\u6210\\u529F\\u5BFC\\u5165 \", importResult.count, \" \\u95E8\\u8BFE\\u7A0B\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 926,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreview,\n            disabled: !inputText.trim(),\n            className: \"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(Eye, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 940,\n              columnNumber: 17\n            }, this), \"\\u89E3\\u6790\\u9884\\u89C8\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 935,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDirectImport,\n            disabled: !inputText.trim(),\n            className: \"btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 15\n            }, this), \"\\u76F4\\u63A5\\u5BFC\\u5165\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 943,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"btn-secondary\",\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 847,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 846,\n    columnNumber: 5\n  }, this);\n};\n_s(CourseTimeParser, \"qzebVJKO1Jcy8ey+GoJo0c1dmRw=\");\n_c = CourseTimeParser;\nvar _c;\n$RefreshReg$(_c, \"CourseTimeParser\");","map":{"version":3,"names":["React","useState","Upload","FileText","AlertCircle","CheckCircle","Copy","Edit3","Save","X","Eye","AlertTriangle","parseCourseInfo","parseCourseTime","deduplicateTimeSlots","jsxDEV","_jsxDEV","CourseTimeParser","teachers","onImportCourses","onAddTeacher","onClose","_s","inputText","setInputText","previewMode","setPreviewMode","parsedCourses","setParsedCourses","importResult","setImportResult","exampleText","formatTimeDisplay","timeSlots","length","map","slot","dayNames","dayName","dayOfWeek","timeRange","timeSlotIds","location","weeks","w","start","end","join","findDuplicateTimeSlots","duplicates","seen","Set","timeSlotId","key","has","includes","push","add","checkCrossCoursesConflicts","courses","conflicts","i","courseA","slotA","j","courseB","slotB","hasWeekOverlap","_courseA$errorMessage","_courseB$errorMessage","conflictKey","timeKey","find","c","id","hasError","errorMessage","handlePreview","trim","success","message","parseCourseText","previews","course","index","duplicateSlots","fixedTimeSlots","hasInternalDuplicates","name","department","campus","credits","timeDisplay","isEditing","undefined","error","Error","checkDuplicateCourses","coursesToImport","existingCourses","warnings","newCourse","duplicateName","existing","teacherId","reason","existingCourse","hasTimeConflict","some","newSlot","existingSlot","weeks1","weeks2","w1","w2","handleImportFromPreview","preview","_preview$timeSlots$","teacher","findBestMatchingTeacher","subject","getOrCreateTeacher","count","handleDirectImport","handleEditCourse","field","value","prev","updated","toggleEdit","deleteCourse","filter","handleBackToEdit","handleAutoFixDuplicates","courseTeachers","availableTeachers","teacherName","cleanName","match","t","shortName","slice","existingTeacher","newTeacher","subjects","unavailableSlots","replace","Date","now","console","warn","handleAnalyzeConflicts","conflictAnalysis","analyzeDetailedConflicts","timeConflicts","forEach","conflict","timeSlot","_slot$weeks","suggestions","suggestion","alert","timeMap","Map","set","get","conflictCourses","split","parseInt","realConflicts","s","text","courseBlocks","block","blocksToProcess","_teachers$","_courseInfo$timeSlots","courseInfo","teacherNames","lines","line","parts","part","_teachers$2","_timeSlots$","scheduleText","secondFieldIsNumber","test","allTimeLines","currentLineIndex","indexOf","nextLine","fallbackError","copyExample","renderPreviewTable","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","onChange","e","target","placeholder","min","max","title","disabled","_c","$RefreshReg$"],"sources":["D:/code/classtable/src/components/CourseTimeParser.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Course, Teacher, FixedTimeSlot, WeekRange } from '../types';\nimport { Upload, FileText, AlertCircle, CheckCircle, Copy, Edit3, Save, X, Eye, AlertTriangle } from 'lucide-react';\nimport { parseCourseInfo, parseCourseTime, deduplicateTimeSlots } from '../utils/courseTimeParser';\n\ninterface CourseTimeParserProps {\n  teachers: Teacher[];\n  onImportCourses: (courses: Omit<Course, 'id'>[]) => void;\n  onAddTeacher?: (teacher: Omit<Teacher, 'id'>) => void;\n  onClose: () => void;\n}\n\n// è§£æåçš„è¯¾ç¨‹æ•°æ®é¢„è§ˆæ¥å£\ninterface ParsedCoursePreview {\n  id: string;\n  name: string;\n  teachers: string[];\n  department: string;\n  campus: string;\n  credits: number;\n  timeSlots: FixedTimeSlot[];\n  timeDisplay: string;\n  isEditing: boolean;\n  hasError: boolean;\n  errorMessage?: string;\n}\n\nexport const CourseTimeParser: React.FC<CourseTimeParserProps> = ({\n  teachers,\n  onImportCourses,\n  onAddTeacher,\n  onClose\n}) => {\n  const [inputText, setInputText] = useState('');\n  const [previewMode, setPreviewMode] = useState(false);\n  const [parsedCourses, setParsedCourses] = useState<ParsedCoursePreview[]>([]);\n  const [importResult, setImportResult] = useState<{\n    success: boolean;\n    message: string;\n    count?: number;\n  } | null>(null);\n\n  // ç¤ºä¾‹æ•°æ®\n  const exampleText = `æœ‰é™è‡ªåŠ¨æœºç†è®º\té™ˆæ–‡å®‡,ä½™ç››å­£\tè®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ï¼ˆç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢ï¼‰\tæ¸…æ°´æ²³\t32\t2\t1-6å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬5-6èŠ‚ æ˜ŸæœŸä¸‰ç¬¬5-6èŠ‚ (ç«‹äººæ¥¼B411)\n\t\t\t\t\t\t7-8å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬5-6èŠ‚ æ˜ŸæœŸä¸‰ç¬¬5-6èŠ‚ (ç«‹äººæ¥¼B411)\né«˜çº§è½¯ä»¶å¼€å‘æŠ€æœ¯\tå­™æ˜\tè®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢\tæ¸…æ°´æ²³\t16\t1\t1-8å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬9-11èŠ‚ (ç«‹äººæ¥¼B402)\næ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä¸å®è·µ10ç­\t2\tè€ƒè¯•\té©¬å…‹æ€ä¸»ä¹‰å­¦é™¢\tå°è\tæ¸…æ°´æ²³\t1-5å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n7-10å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n1-4å‘¨ï¼Œæ˜ŸæœŸå››ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)\n6-10å‘¨ï¼Œæ˜ŸæœŸå››ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)`;\n\n  // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\n  const formatTimeDisplay = (timeSlots: FixedTimeSlot[]): string => {\n    if (timeSlots.length === 0) return 'æ— æ—¶é—´å®‰æ’';\n    \n    return timeSlots.map(slot => {\n      const dayNames = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];\n      const dayName = dayNames[slot.dayOfWeek] || 'æœªçŸ¥';\n      const timeRange = slot.timeSlotIds.length > 1 \n        ? `ç¬¬${slot.timeSlotIds[0]}-${slot.timeSlotIds[slot.timeSlotIds.length - 1]}èŠ‚`\n        : `ç¬¬${slot.timeSlotIds[0]}èŠ‚`;\n      const location = slot.location ? ` (${slot.location})` : '';\n      const weeks = slot.weeks && slot.weeks.length > 0 \n        ? slot.weeks.map(w => w.start === w.end ? `${w.start}å‘¨` : `${w.start}-${w.end}å‘¨`).join('ï¼Œ')\n        : 'å…¨å­¦æœŸ';\n      \n      return `${weeks}ï¼Œ${dayName}${timeRange}${location}`;\n    }).join('ï¼›');\n  };\n\n  // æ£€æµ‹é‡å¤æ—¶é—´æ®µ\n  const findDuplicateTimeSlots = (timeSlots: FixedTimeSlot[]): string[] => {\n    const duplicates: string[] = [];\n    const seen = new Set<string>();\n    \n    for (const slot of timeSlots) {\n      for (const timeSlotId of slot.timeSlotIds) {\n        const key = `å‘¨${['', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'][slot.dayOfWeek]}ç¬¬${timeSlotId}èŠ‚`;\n        if (seen.has(key)) {\n          if (!duplicates.includes(key)) {\n            duplicates.push(key);\n          }\n        } else {\n          seen.add(key);\n        }\n      }\n    }\n    \n    return duplicates;\n  };\n\n  // æ£€æŸ¥è¯¾ç¨‹é—´çš„æ—¶é—´å†²çª\n  const checkCrossCoursesConflicts = (courses: ParsedCoursePreview[]) => {\n    const conflicts: { [key: string]: ParsedCoursePreview[] } = {};\n    \n    // ä¸ºæ¯ä¸ªæ—¶é—´æ®µåˆ›å»ºæ˜ å°„\n    for (let i = 0; i < courses.length; i++) {\n      const courseA = courses[i];\n      \n      for (const slotA of courseA.timeSlots) {\n        for (const timeSlotId of slotA.timeSlotIds) {\n          // æ£€æŸ¥å…¶ä»–è¯¾ç¨‹çš„ç›¸åŒæ—¶é—´æ®µ\n          for (let j = i + 1; j < courses.length; j++) {\n            const courseB = courses[j];\n            \n            for (const slotB of courseB.timeSlots) {\n              if (slotA.dayOfWeek === slotB.dayOfWeek && \n                  slotB.timeSlotIds.includes(timeSlotId) &&\n                  hasWeekOverlap(slotA.weeks, slotB.weeks)) {\n                \n                const conflictKey = `${slotA.dayOfWeek}-${timeSlotId}`;\n                const dayName = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][slotA.dayOfWeek];\n                const timeKey = `${dayName}ç¬¬${timeSlotId}èŠ‚`;\n                \n                if (!conflicts[conflictKey]) {\n                  conflicts[conflictKey] = [];\n                }\n                \n                // æ·»åŠ å†²çªçš„è¯¾ç¨‹ï¼ˆé¿å…é‡å¤ï¼‰\n                if (!conflicts[conflictKey].find(c => c.id === courseA.id)) {\n                  conflicts[conflictKey].push(courseA);\n                }\n                if (!conflicts[conflictKey].find(c => c.id === courseB.id)) {\n                  conflicts[conflictKey].push(courseB);\n                }\n                \n                // æ ‡è®°ä¸¤é—¨è¯¾ç¨‹éƒ½æœ‰é”™è¯¯\n                if (!courseA.hasError) {\n                  courseA.hasError = true;\n                  courseA.errorMessage = `ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                } else if (!courseA.errorMessage?.includes('æ—¶é—´å†²çª')) {\n                  courseA.errorMessage += `; ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                }\n                \n                if (!courseB.hasError) {\n                  courseB.hasError = true;\n                  courseB.errorMessage = `ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                } else if (!courseB.errorMessage?.includes('æ—¶é—´å†²çª')) {\n                  courseB.errorMessage += `; ä¸å…¶ä»–è¯¾ç¨‹æ—¶é—´å†²çª: ${timeKey}`;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    \n    return conflicts;\n  };\n\n  // é¢„è§ˆè§£æç»“æœ\n  const handlePreview = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: 'è¯·è¾“å…¥è¯¾ç¨‹æ•°æ®'\n      });\n      return;\n    }\n\n    try {\n      const courses = parseCourseText(inputText);\n      \n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: 'æœªèƒ½è§£æå‡ºä»»ä½•è¯¾ç¨‹æ•°æ®ï¼Œè¯·æ£€æŸ¥æ ¼å¼'\n        });\n        return;\n      }\n\n      // è½¬æ¢ä¸ºé¢„è§ˆæ ¼å¼ï¼Œå¹¶æ£€æŸ¥å†…éƒ¨é‡å¤\n      const previews: ParsedCoursePreview[] = courses.map((course, index) => {\n        // æ£€æŸ¥è¯¥è¯¾ç¨‹å†…éƒ¨æ˜¯å¦æœ‰é‡å¤çš„æ—¶é—´æ®µ\n        const duplicateSlots = findDuplicateTimeSlots(course.fixedTimeSlots);\n        const hasInternalDuplicates = duplicateSlots.length > 0;\n        \n        return {\n          id: `preview_${index}`,\n          name: course.name,\n          teachers: course.teachers || [],\n          department: course.department || 'æœªçŸ¥å­¦é™¢',\n          campus: course.campus || 'æœªçŸ¥æ ¡åŒº',\n          credits: course.credits,\n          timeSlots: course.fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(course.fixedTimeSlots),\n          isEditing: false,\n          hasError: hasInternalDuplicates,\n          errorMessage: hasInternalDuplicates ? `æ£€æµ‹åˆ°é‡å¤æ—¶é—´æ®µ: ${duplicateSlots.join(', ')}` : undefined\n        };\n      });\n\n      // æ£€æŸ¥è¯¾ç¨‹é—´çš„æ—¶é—´å†²çª\n      checkCrossCoursesConflicts(previews);\n\n      setParsedCourses(previews);\n      setPreviewMode(true);\n      setImportResult(null);\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `è§£æå¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // æ£€æŸ¥è¯¾ç¨‹æ˜¯å¦é‡å¤\n  const checkDuplicateCourses = (coursesToImport: Omit<Course, 'id'>[], existingCourses: Course[]) => {\n    const duplicates: { course: Omit<Course, 'id'>; reason: string }[] = [];\n    const warnings: string[] = [];\n    \n    for (const newCourse of coursesToImport) {\n      // æ£€æŸ¥ç›¸åŒè¯¾ç¨‹åå’Œæ•™å¸ˆçš„é‡å¤\n      const duplicateName = existingCourses.find(existing => \n        existing.name === newCourse.name && existing.teacherId === newCourse.teacherId\n      );\n      \n      if (duplicateName) {\n        duplicates.push({\n          course: newCourse,\n          reason: `ç›¸åŒè¯¾ç¨‹åå’Œæ•™å¸ˆ: ${newCourse.name}`\n        });\n        continue;\n      }\n      \n      // æ£€æŸ¥æ—¶é—´å†²çª\n      for (const existingCourse of existingCourses) {\n        const hasTimeConflict = newCourse.fixedTimeSlots.some(newSlot =>\n          existingCourse.fixedTimeSlots.some(existingSlot =>\n            newSlot.dayOfWeek === existingSlot.dayOfWeek &&\n            newSlot.timeSlotIds.some(id => existingSlot.timeSlotIds.includes(id)) &&\n            hasWeekOverlap(newSlot.weeks, existingSlot.weeks)\n          )\n        );\n        \n        if (hasTimeConflict) {\n          warnings.push(`è¯¾ç¨‹ \"${newCourse.name}\" ä¸ç°æœ‰è¯¾ç¨‹ \"${existingCourse.name}\" å­˜åœ¨æ—¶é—´å†²çª`);\n        }\n      }\n    }\n    \n    return { duplicates, warnings };\n  };\n\n  // æ£€æŸ¥å‘¨æ¬¡æ˜¯å¦é‡å \n  const hasWeekOverlap = (weeks1?: WeekRange[], weeks2?: WeekRange[]): boolean => {\n    if (!weeks1 || !weeks2) return true; // å¦‚æœæ²¡æœ‰æŒ‡å®šå‘¨æ¬¡ï¼Œå‡è®¾é‡å \n    \n    return weeks1.some(w1 =>\n      weeks2.some(w2 =>\n        w1.start <= w2.end && w1.end >= w2.start\n      )\n    );\n  };\n\n  // ä»é¢„è§ˆç›´æ¥å¯¼å…¥\n  const handleImportFromPreview = () => {\n    try {\n      const courses: Omit<Course, 'id'>[] = parsedCourses.map(preview => {\n        // æ”¹è¿›çš„æ•™å¸ˆåŒ¹é…é€»è¾‘\n        const teacher = findBestMatchingTeacher(preview.teachers, teachers);\n\n        return {\n          name: preview.name,\n          subject: preview.department,\n          teacherId: teacher?.id || getOrCreateTeacher(preview.teachers[0] || 'æœªçŸ¥æ•™å¸ˆ'),\n          credits: preview.credits,\n          fixedTimeSlots: preview.timeSlots,\n          location: preview.timeSlots[0]?.location,\n          weeks: `1-20å‘¨`,\n          teachers: preview.teachers,\n          department: preview.department,\n          campus: preview.campus\n        };\n      });\n\n      // è·å–ç°æœ‰è¯¾ç¨‹è¿›è¡Œé‡å¤æ£€æŸ¥\n      // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä¼ å…¥ç°æœ‰è¯¾ç¨‹ï¼Œä½†ç»„ä»¶æ¥å£ä¸­æ²¡æœ‰ï¼Œæ‰€ä»¥å…ˆè·³è¿‡æ£€æŸ¥\n      // const { duplicates, warnings } = checkDuplicateCourses(courses, existingCourses);\n\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: 'è¯¾ç¨‹å¯¼å…¥æˆåŠŸï¼',\n        count: courses.length\n      });\n      setPreviewMode(false);\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `å¯¼å…¥å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // ç›´æ¥å¯¼å…¥ï¼ˆè·³è¿‡é¢„è§ˆï¼‰\n  const handleDirectImport = () => {\n    if (!inputText.trim()) {\n      setImportResult({\n        success: false,\n        message: 'è¯·è¾“å…¥è¯¾ç¨‹æ•°æ®'\n      });\n      return;\n    }\n\n    try {\n      const courses = parseCourseText(inputText);\n      \n      if (courses.length === 0) {\n        setImportResult({\n          success: false,\n          message: 'æœªèƒ½è§£æå‡ºä»»ä½•è¯¾ç¨‹æ•°æ®ï¼Œè¯·æ£€æŸ¥æ ¼å¼'\n        });\n        return;\n      }\n\n      onImportCourses(courses);\n      setImportResult({\n        success: true,\n        message: 'è¯¾ç¨‹å¯¼å…¥æˆåŠŸï¼',\n        count: courses.length\n      });\n      setInputText('');\n    } catch (error) {\n      setImportResult({\n        success: false,\n        message: `å¯¼å…¥å¤±è´¥: ${error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'}`\n      });\n    }\n  };\n\n  // ç¼–è¾‘è¯¾ç¨‹ä¿¡æ¯\n  const handleEditCourse = (id: string, field: keyof ParsedCoursePreview, value: any) => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.id === id) {\n        const updated = { ...course, [field]: value };\n        \n        // å¦‚æœä¿®æ”¹äº†æ—¶é—´ç›¸å…³å­—æ®µï¼Œé‡æ–°ç”Ÿæˆæ—¶é—´æ˜¾ç¤º\n        if (field === 'timeSlots') {\n          updated.timeDisplay = formatTimeDisplay(value);\n        }\n        \n        return updated;\n      }\n      return course;\n    }));\n  };\n\n  // åˆ‡æ¢ç¼–è¾‘æ¨¡å¼\n  const toggleEdit = (id: string) => {\n    setParsedCourses(prev => prev.map(course => \n      course.id === id \n        ? { ...course, isEditing: !course.isEditing }\n        : course\n    ));\n  };\n\n  // åˆ é™¤è¯¾ç¨‹\n  const deleteCourse = (id: string) => {\n    setParsedCourses(prev => prev.filter(course => course.id !== id));\n  };\n\n  // è¿”å›ç¼–è¾‘æ¨¡å¼\n  const handleBackToEdit = () => {\n    setPreviewMode(false);\n    setImportResult(null);\n  };\n\n  // è‡ªåŠ¨ä¿®å¤é‡å¤æ—¶é—´æ®µ\n  const handleAutoFixDuplicates = () => {\n    setParsedCourses(prev => prev.map(course => {\n      if (course.hasError) {\n        // ä½¿ç”¨è§£æå™¨çš„å»é‡åŠŸèƒ½é‡æ–°å¤„ç†æ—¶é—´æ®µ\n        const fixedTimeSlots = deduplicateTimeSlots(course.timeSlots);\n        return {\n          ...course,\n          timeSlots: fixedTimeSlots,\n          timeDisplay: formatTimeDisplay(fixedTimeSlots),\n          hasError: false,\n          errorMessage: undefined\n        };\n      }\n      return course;\n    }));\n  };\n\n  // æ”¹è¿›çš„æ•™å¸ˆåŒ¹é…é€»è¾‘\n  const findBestMatchingTeacher = (courseTeachers: string[], availableTeachers: Teacher[]): Teacher | null => {\n    if (!courseTeachers || courseTeachers.length === 0) return null;\n    \n    for (const teacherName of courseTeachers) {\n      const cleanName = teacherName.trim();\n      \n      // ç²¾ç¡®åŒ¹é…\n      let match = availableTeachers.find(t => t.name === cleanName);\n      if (match) return match;\n      \n      // åŒ…å«åŒ¹é…\n      match = availableTeachers.find(t => t.name.includes(cleanName) || cleanName.includes(t.name));\n      if (match) return match;\n      \n      // æœ€åä¸¤ä¸ªå­—ç¬¦åŒ¹é…ï¼ˆå¤„ç†å§“åç®€åŒ–çš„æƒ…å†µï¼‰\n      if (cleanName.length >= 2) {\n        const shortName = cleanName.slice(-2);\n        match = availableTeachers.find(t => t.name.includes(shortName));\n        if (match) return match;\n      }\n    }\n    \n    return null;\n  };\n\n  // åˆ›å»ºæˆ–è·å–æ•™å¸ˆID\n  const getOrCreateTeacher = (teacherName: string): string => {\n    const cleanName = teacherName.trim();\n    \n    // å…ˆå°è¯•åœ¨ç°æœ‰æ•™å¸ˆä¸­æŸ¥æ‰¾\n    const existingTeacher = findBestMatchingTeacher([cleanName], teachers);\n    if (existingTeacher) {\n      return existingTeacher.id;\n    }\n    \n    // å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¸”æœ‰ onAddTeacher å›è°ƒï¼Œåˆ›å»ºæ–°æ•™å¸ˆ\n    if (onAddTeacher && cleanName !== 'æœªçŸ¥æ•™å¸ˆ' && cleanName) {\n      try {\n        const newTeacher: Omit<Teacher, 'id'> = {\n          name: cleanName,\n          subjects: [],\n          unavailableSlots: []\n        };\n        onAddTeacher(newTeacher);\n        \n        // ç”Ÿæˆä¸€ä¸ªä¸´æ—¶IDï¼Œå®é™…ä¸Šæ–°æ•™å¸ˆä¼šæœ‰è‡ªå·±çš„ID\n        return `new_${cleanName.replace(/\\s/g, '_')}_${Date.now()}`;\n      } catch (error) {\n        console.warn('åˆ›å»ºæ•™å¸ˆå¤±è´¥:', error);\n      }\n    }\n    \n    // æœ€åå›é€€ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªæ•™å¸ˆçš„IDæˆ–unknown\n    return teachers.length > 0 ? teachers[0].id : 'unknown';\n  };\n\n  // è¯¦ç»†å†²çªåˆ†æ\n  const handleAnalyzeConflicts = () => {\n    const conflictAnalysis = analyzeDetailedConflicts(parsedCourses);\n    \n    let message = \"ğŸ“Š è¯¦ç»†å†²çªåˆ†ææŠ¥å‘Š:\\n\\n\";\n    \n    if (conflictAnalysis.timeConflicts.length > 0) {\n      message += \"â° æ—¶é—´å†²çª:\\n\";\n      conflictAnalysis.timeConflicts.forEach((conflict, index) => {\n        message += `${index + 1}. ${conflict.timeSlot}:\\n`;\n        conflict.courses.forEach(course => {\n          const weeks = course.timeSlots\n            .filter(slot => slot.dayOfWeek === conflict.dayOfWeek && \n                    slot.timeSlotIds.includes(conflict.timeSlotId))\n            .map(slot => slot.weeks?.map(w => `${w.start}-${w.end}å‘¨`).join(',') || 'å…¨å­¦æœŸ')\n            .join(',');\n          message += `   - ${course.name} (${course.teachers.join(',')}) [${weeks}]\\n`;\n        });\n        message += \"\\n\";\n      });\n    }\n    \n    if (conflictAnalysis.suggestions.length > 0) {\n      message += \"ğŸ’¡ å»ºè®®è§£å†³æ–¹æ¡ˆ:\\n\";\n      conflictAnalysis.suggestions.forEach((suggestion, index) => {\n        message += `${index + 1}. ${suggestion}\\n`;\n      });\n    }\n    \n    alert(message);\n  };\n\n  // åˆ†æè¯¦ç»†å†²çªä¿¡æ¯\n  const analyzeDetailedConflicts = (courses: ParsedCoursePreview[]) => {\n    const timeConflicts: {\n      timeSlot: string;\n      dayOfWeek: number;\n      timeSlotId: string;\n      courses: ParsedCoursePreview[];\n    }[] = [];\n    \n    const suggestions: string[] = [];\n    \n    // æ£€æŸ¥æ—¶é—´å†²çª\n    const timeMap = new Map<string, ParsedCoursePreview[]>();\n    \n    courses.forEach(course => {\n      course.timeSlots.forEach(slot => {\n        slot.timeSlotIds.forEach(timeSlotId => {\n          const key = `${slot.dayOfWeek}-${timeSlotId}`;\n          if (!timeMap.has(key)) {\n            timeMap.set(key, []);\n          }\n          timeMap.get(key)!.push(course);\n        });\n      });\n    });\n    \n    timeMap.forEach((conflictCourses, timeKey) => {\n      if (conflictCourses.length > 1) {\n        const [dayOfWeek, timeSlotId] = timeKey.split('-');\n        const dayName = ['', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'][parseInt(dayOfWeek)];\n        \n        // æ£€æŸ¥æ˜¯å¦çœŸçš„å†²çªï¼ˆå‘¨æ¬¡é‡å ï¼‰\n        const realConflicts: ParsedCoursePreview[] = [];\n        for (let i = 0; i < conflictCourses.length; i++) {\n          for (let j = i + 1; j < conflictCourses.length; j++) {\n            const courseA = conflictCourses[i];\n            const courseB = conflictCourses[j];\n            \n            const slotA = courseA.timeSlots.find(s => \n              s.dayOfWeek === parseInt(dayOfWeek) && s.timeSlotIds.includes(timeSlotId)\n            );\n            const slotB = courseB.timeSlots.find(s => \n              s.dayOfWeek === parseInt(dayOfWeek) && s.timeSlotIds.includes(timeSlotId)\n            );\n            \n            if (slotA && slotB && hasWeekOverlap(slotA.weeks, slotB.weeks)) {\n              if (!realConflicts.includes(courseA)) realConflicts.push(courseA);\n              if (!realConflicts.includes(courseB)) realConflicts.push(courseB);\n            }\n          }\n        }\n        \n        if (realConflicts.length > 1) {\n          timeConflicts.push({\n            timeSlot: `${dayName}ç¬¬${timeSlotId}èŠ‚`,\n            dayOfWeek: parseInt(dayOfWeek),\n            timeSlotId,\n            courses: realConflicts\n          });\n          \n          // ç”Ÿæˆè§£å†³å»ºè®®\n          if (realConflicts.length === 2) {\n            suggestions.push(`å»ºè®®è°ƒæ•´ \"${realConflicts[1].name}\" çš„ä¸Šè¯¾æ—¶é—´ï¼Œé¿å¼€ ${dayName}ç¬¬${timeSlotId}èŠ‚`);\n          } else {\n            suggestions.push(`${dayName}ç¬¬${timeSlotId}èŠ‚æœ‰${realConflicts.length}é—¨è¯¾ç¨‹å†²çªï¼Œå»ºè®®é‡æ–°å®‰æ’æ—¶é—´`);\n          }\n        }\n      }\n    });\n    \n    return {\n      timeConflicts,\n      suggestions\n    };\n  };\n\n  // è§£æè¯¾ç¨‹æ–‡æœ¬\n  const parseCourseText = (text: string): Omit<Course, 'id'>[] => {\n    const courses: Omit<Course, 'id'>[] = [];\n\n    // é¦–å…ˆæŒ‰åŒæ¢è¡Œæˆ–å¤šä¸ªè¿ç»­æ¢è¡Œåˆ†å‰²ï¼Œå¤„ç†å¯èƒ½çš„å¤šä¸ªè¯¾ç¨‹è®°å½•\n    const courseBlocks = text.trim().split(/\\n\\s*\\n/).filter(block => block.trim());\n    \n    // å¦‚æœæ²¡æœ‰æ˜æ˜¾çš„åˆ†å—ï¼Œå°è¯•æŒ‰è¡Œå¤„ç†ï¼Œä½†è¦è€ƒè™‘å¤šè¡Œæ•°æ®\n    const blocksToProcess = courseBlocks.length > 1 ? courseBlocks : [text.trim()];\n    \n    for (const block of blocksToProcess) {\n      try {\n        // å¯¹äºæ¯ä¸ªå—ï¼Œå¯èƒ½åŒ…å«ä¸€ä¸ªè¯¾ç¨‹çš„å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…æ‹¬å¤šè¡Œæ—¶é—´æ•°æ®ï¼‰\n        const courseInfo = parseCourseInfo(block);\n        \n        // æŸ¥æ‰¾å¯¹åº”çš„æ•™å¸ˆID\n        const teacherNames = courseInfo.teachers;\n        const teacher = teachers.find(t => \n          teacherNames.some(name => t.name.includes(name) || name.includes(t.name))\n        );\n\n        courses.push({\n          name: courseInfo.name,\n          subject: courseInfo.department || 'æœªçŸ¥å­¦ç§‘',\n          teacherId: teacher?.id || teachers[0]?.id || 'unknown',\n          credits: courseInfo.credits || 2,\n          fixedTimeSlots: courseInfo.timeSlots,\n          location: courseInfo.timeSlots[0]?.location,\n          weeks: `1-20å‘¨`, // é»˜è®¤å…¨å­¦æœŸ\n          teachers: courseInfo.teachers,\n          department: courseInfo.department,\n          campus: courseInfo.campus\n        });\n      } catch (error) {\n        console.warn('è§£æè¯¾ç¨‹å—å¤±è´¥:', block, error);\n        \n        // å°è¯•æŒ‰è¡Œå¤„ç†ä½œä¸ºåå¤‡æ–¹æ¡ˆ\n        const lines = block.split('\\n').filter(line => line.trim());\n        for (const line of lines) {\n          // åªå¤„ç†åŒ…å«åˆ¶è¡¨ç¬¦çš„è¡Œï¼ˆä¸»è¦è¯¾ç¨‹ä¿¡æ¯ï¼‰\n          if (!line.includes('\\t')) continue;\n          \n        try {\n          const parts = line.split('\\t').map(part => part.trim());\n          if (parts.length >= 6) {\n              // å°è¯•ä¸¤ç§æ ¼å¼\n              let name: string;\n              let teacherName: string;\n              let department: string;\n              let campus: string;\n              let credits: number;\n              let scheduleText: string[];\n              \n              // æ£€æµ‹æ ¼å¼\n              const secondFieldIsNumber = /^\\d+$/.test(parts[1]);\n              \n              if (secondFieldIsNumber && parts.length >= 6) {\n                // æ ¼å¼1: è¯¾ç¨‹å\tå­¦åˆ†\tè€ƒè¯•æ–¹å¼\tå­¦é™¢\tæ•™å¸ˆ\tæ ¡åŒº\tæ—¶é—´å®‰æ’...\n                [name, , , department, teacherName, campus, ...scheduleText] = parts;\n                credits = parseInt(parts[1]) || 2;\n              } else {\n                // æ ¼å¼2: è¯¾ç¨‹å\tæ•™å¸ˆ\tå­¦é™¢\tæ ¡åŒº\tå­¦æ—¶\tå­¦åˆ†\tæ—¶é—´å®‰æ’...\n                [name, teacherName, department, campus, , , ...scheduleText] = parts;\n                credits = parseInt(parts[5]) || 2;\n              }\n              \n              // æ”¶é›†è¯¥è¯¾ç¨‹çš„æ‰€æœ‰æ—¶é—´ä¿¡æ¯ï¼ˆåŒ…æ‹¬åç»­è¡Œï¼‰\n              const allTimeLines = [scheduleText.join('\\t')];\n              const currentLineIndex = lines.indexOf(line);\n              for (let i = currentLineIndex + 1; i < lines.length; i++) {\n                const nextLine = lines[i];\n                if (nextLine.includes('\\t')) break; // é‡åˆ°æ–°çš„è¯¾ç¨‹è®°å½•\n                if (/\\d+[-â€“]?\\d*å‘¨|æ˜ŸæœŸ[ä¸€äºŒä¸‰å››äº”å…­æ—¥]|ç¬¬\\d+/.test(nextLine)) {\n                  allTimeLines.push(nextLine);\n                }\n              }\n              \n              const timeSlots = parseCourseTime(allTimeLines.join('\\n'));\n            const teacher = teachers.find(t => t.name.includes(teacherName) || teacherName.includes(t.name));\n            \n            courses.push({\n              name,\n              subject: department || 'æœªçŸ¥å­¦ç§‘',\n              teacherId: teacher?.id || teachers[0]?.id || 'unknown',\n                credits,\n              fixedTimeSlots: timeSlots,\n              location: timeSlots[0]?.location,\n              weeks: `1-20å‘¨`,\n              teachers: [teacherName],\n              department,\n              campus\n            });\n          }\n        } catch (fallbackError) {\n          console.warn('åå¤‡è§£æä¹Ÿå¤±è´¥:', line, fallbackError);\n          }\n        }\n      }\n    }\n\n    return courses;\n  };\n\n  const copyExample = () => {\n    setInputText(exampleText);\n  };\n\n  // æ¸²æŸ“é¢„è§ˆè¡¨æ ¼\n  const renderPreviewTable = () => (\n    <div className=\"space-y-4\">\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h4 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Eye className=\"h-5 w-5\" />\n            è§£æç»“æœé¢„è§ˆ ({parsedCourses.length} é—¨è¯¾ç¨‹)\n          </h4>\n          {parsedCourses.some(c => c.hasError) && (\n            <div className=\"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <div className=\"flex items-start gap-2\">\n                <AlertTriangle className=\"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0\" />\n                <div className=\"text-sm text-yellow-800\">\n                  <p className=\"font-medium\">æ£€æµ‹åˆ°æ•°æ®é—®é¢˜ï¼š</p>\n                  <div className=\"mt-1 space-y-1\">\n                    {parsedCourses.filter(c => c.hasError).map(course => (\n                      <div key={course.id} className=\"bg-yellow-100 rounded px-2 py-1\">\n                        <span className=\"font-medium\">{course.name}:</span> {course.errorMessage}\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"mt-3 flex gap-3\">\n                    <button\n                      onClick={handleAutoFixDuplicates}\n                      className=\"text-blue-600 hover:text-blue-800 underline text-sm\"\n                    >\n                      è‡ªåŠ¨ä¿®å¤é‡å¤é—®é¢˜\n                    </button>\n                    <button\n                      onClick={handleAnalyzeConflicts}\n                      className=\"text-purple-600 hover:text-purple-800 underline text-sm\"\n                    >\n                      è¯¦ç»†å†²çªåˆ†æ\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        <button\n          onClick={handleBackToEdit}\n          className=\"btn-secondary flex items-center gap-2\"\n        >\n          <Edit3 className=\"h-4 w-4\" />\n          è¿”å›ç¼–è¾‘\n        </button>\n      </div>\n\n      <div className=\"overflow-x-auto\">\n        <table className=\"w-full border-collapse border border-gray-300\">\n          <thead>\n            <tr className=\"bg-gray-50\">\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">è¯¾ç¨‹å</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">æ•™å¸ˆ</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">å­¦é™¢</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">æ ¡åŒº</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">å­¦åˆ†</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-left\">æ—¶é—´å®‰æ’</th>\n              <th className=\"border border-gray-300 px-3 py-2 text-center\">æ“ä½œ</th>\n            </tr>\n          </thead>\n          <tbody>\n            {parsedCourses.map((course) => (\n              <tr key={course.id} className=\"hover:bg-gray-50\">\n                <td className=\"border border-gray-300 px-3 py-2\">\n                  {course.isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={course.name}\n                      onChange={(e) => handleEditCourse(course.id, 'name', e.target.value)}\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\n                    />\n                  ) : (\n                    <span className=\"font-medium\">{course.name}</span>\n                  )}\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2\">\n                  {course.isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={course.teachers.join(', ')}\n                      onChange={(e) => handleEditCourse(course.id, 'teachers', e.target.value.split(',').map(t => t.trim()))}\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\n                      placeholder=\"å¤šä¸ªæ•™å¸ˆç”¨é€—å·åˆ†éš”\"\n                    />\n                  ) : (\n                    <span>{course.teachers.join(', ')}</span>\n                  )}\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2\">\n                  {course.isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={course.department}\n                      onChange={(e) => handleEditCourse(course.id, 'department', e.target.value)}\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\n                    />\n                  ) : (\n                    <span>{course.department}</span>\n                  )}\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2\">\n                  {course.isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={course.campus}\n                      onChange={(e) => handleEditCourse(course.id, 'campus', e.target.value)}\n                      className=\"w-full p-1 border border-gray-300 rounded text-sm\"\n                    />\n                  ) : (\n                    <span>{course.campus}</span>\n                  )}\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2\">\n                  {course.isEditing ? (\n                    <input\n                      type=\"number\"\n                      value={course.credits}\n                      onChange={(e) => handleEditCourse(course.id, 'credits', parseInt(e.target.value) || 0)}\n                      className=\"w-20 p-1 border border-gray-300 rounded text-sm\"\n                      min=\"0\"\n                      max=\"10\"\n                    />\n                  ) : (\n                    <span>{course.credits}</span>\n                  )}\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2 max-w-xs\">\n                  <div className=\"text-sm text-gray-700 overflow-hidden\">\n                    {course.timeDisplay}\n                    {course.hasError && course.errorMessage && (\n                      <div className=\"mt-1 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs flex items-start gap-1\">\n                        <AlertTriangle className=\"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0\" />\n                        <span>{course.errorMessage}</span>\n                      </div>\n                    )}\n                  </div>\n                </td>\n                <td className=\"border border-gray-300 px-3 py-2 text-center\">\n                  <div className=\"flex items-center justify-center gap-1\">\n                    <button\n                      onClick={() => toggleEdit(course.id)}\n                      className={`p-1 rounded hover:bg-gray-100 ${\n                        course.isEditing ? 'text-green-600' : 'text-blue-600'\n                      }`}\n                      title={course.isEditing ? 'ä¿å­˜' : 'ç¼–è¾‘'}\n                    >\n                      {course.isEditing ? <Save className=\"h-4 w-4\" /> : <Edit3 className=\"h-4 w-4\" />}\n                    </button>\n                    <button\n                      onClick={() => deleteCourse(course.id)}\n                      className=\"p-1 rounded hover:bg-gray-100 text-red-600\"\n                      title=\"åˆ é™¤\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"flex gap-3 pt-4 border-t\">\n        <button\n          onClick={handleImportFromPreview}\n          disabled={parsedCourses.length === 0}\n          className=\"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <Upload className=\"h-4 w-4\" />\n          ç¡®è®¤å¯¼å…¥ ({parsedCourses.length} é—¨è¯¾ç¨‹)\n        </button>\n        <button\n          onClick={onClose}\n          className=\"btn-secondary\"\n        >\n          å–æ¶ˆ\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            è¯¾ç¨‹æ—¶é—´è§£æå¯¼å…¥\n          </h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700\"\n          >\n            âœ•\n          </button>\n        </div>\n\n        {previewMode ? renderPreviewTable() : (\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              è¯¾ç¨‹æ•°æ®\n            </label>\n            <div className=\"mb-2\">\n              <button\n                onClick={copyExample}\n                className=\"text-sm btn-secondary flex items-center gap-1\"\n              >\n                <Copy className=\"h-3 w-3\" />\n                ä½¿ç”¨ç¤ºä¾‹æ•°æ®\n              </button>\n            </div>\n            <textarea\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n                placeholder=\"è¯·ç²˜è´´è¯¾ç¨‹æ•°æ®ï¼Œæ¯è¡Œä¸€é—¨è¯¾ç¨‹ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œå¤šè¡Œæ—¶é—´å®‰æ’\"\n              className=\"w-full h-40 p-3 border border-gray-300 rounded-lg text-sm font-mono\"\n            />\n          </div>\n\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <h4 className=\"font-medium text-blue-900 mb-2 flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n                æ”¯æŒçš„æ•°æ®æ ¼å¼\n            </h4>\n              <div className=\"text-sm text-blue-800 space-y-2\">\n                <div>\n                  <p className=\"font-semibold\">æ ¼å¼1ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰ï¼š</p>\n                  <p>è¯¾ç¨‹å &nbsp; æ•™å¸ˆ &nbsp; å­¦é™¢ &nbsp; æ ¡åŒº &nbsp; å­¦æ—¶ &nbsp; å­¦åˆ† &nbsp; æ—¶é—´å®‰æ’</p>\n                </div>\n                <div>\n                  <p className=\"font-semibold\">æ ¼å¼2ï¼ˆæ–°æ ¼å¼ï¼‰ï¼š</p>\n                  <p>è¯¾ç¨‹å &nbsp; å­¦åˆ† &nbsp; è€ƒè¯•æ–¹å¼ &nbsp; å­¦é™¢ &nbsp; æ•™å¸ˆ &nbsp; æ ¡åŒº &nbsp; æ—¶é—´å®‰æ’</p>\n                </div>\n                <div>\n                  <p className=\"font-semibold\">æ—¶é—´æ ¼å¼ç¤ºä¾‹ï¼š</p>\n                  <p>â€¢ 1-5å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)</p>\n                  <p>â€¢ 7-10å‘¨ï¼Œæ˜ŸæœŸä¸€ç¬¬3-4èŠ‚ (ç«‹äººæ¥¼B417)</p>\n                  <p>â€¢ <strong>æ”¯æŒå¤šè¡Œæ—¶é—´æ•°æ®</strong>ï¼Œè‡ªåŠ¨è¯†åˆ«ç»­è¡Œ</p>\n              <p>â€¢ è‡ªåŠ¨è¯†åˆ«æ˜ŸæœŸå’ŒèŠ‚æ¬¡ï¼Œæ”¯æŒè¿ç»­èŠ‚æ¬¡</p>\n                </div>\n            </div>\n          </div>\n\n          {importResult && (\n            <div className={`p-4 rounded-lg flex items-start gap-3 ${\n              importResult.success \n                ? 'bg-green-50 border border-green-200' \n                : 'bg-red-50 border border-red-200'\n            }`}>\n              {importResult.success ? (\n                <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\" />\n              ) : (\n                <AlertCircle className=\"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0\" />\n              )}\n              <div>\n                <p className={`font-medium ${\n                  importResult.success ? 'text-green-900' : 'text-red-900'\n                }`}>\n                  {importResult.message}\n                </p>\n                {importResult.count && (\n                  <p className=\"text-green-700 text-sm mt-1\">\n                    æˆåŠŸå¯¼å…¥ {importResult.count} é—¨è¯¾ç¨‹\n                  </p>\n                )}\n              </div>\n            </div>\n          )}\n\n          <div className=\"flex gap-3 pt-4\">\n            <button\n                onClick={handlePreview}\n              disabled={!inputText.trim()}\n              className=\"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <Eye className=\"h-4 w-4\" />\n                è§£æé¢„è§ˆ\n              </button>\n              <button\n                onClick={handleDirectImport}\n                disabled={!inputText.trim()}\n                className=\"btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <Upload className=\"h-4 w-4\" />\n                ç›´æ¥å¯¼å…¥\n            </button>\n            <button\n              onClick={onClose}\n              className=\"btn-secondary\"\n            >\n              å–æ¶ˆ\n            </button>\n          </div>\n        </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}