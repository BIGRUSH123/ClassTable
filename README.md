# 个人课表管理系统

这是一个基于 React + TypeScript 开发的个人课表管理系统，专为学生设计，帮助管理个人课程安排和时间表。

## 🎯 功能特性

### 📚 课程管理
- **教师管理**：管理任课教师信息和专业领域
- **课程管理**：添加课程，设置学分、上课地点和固定时间段
- **批量导入**：支持粘贴格式化文本快速导入课程信息
- **智能验证**：自动验证课程数据完整性和时间冲突

### 📅 课表功能
- **固定时间段**：每门课程都有预设的上课时间，无需智能排课
- **冲突检测**：自动检测时间冲突和教师冲突
- **直观展示**：清晰的周课表网格显示，支持教师筛选
- **课表统计**：显示总课程数、教师数、总学分等信息

### 🖼️ 导出功能
- **图片导出**：将课表导出为 PNG 图片格式
- **数据导出**：支持课表数据的 JSON 格式导出
- **打印友好**：导出的图片适合打印和分享

### 💾 数据管理
- **本地存储**：数据自动保存到浏览器本地存储
- **数据迁移**：自动处理旧版本数据格式转换
- **数据重置**：一键清除所有数据重新开始
- **调试工具**：内置数据验证和调试功能

## 🛠️ 技术栈

- **前端框架**：React 18 + TypeScript
- **UI 库**：Tailwind CSS + Lucide React Icons
- **状态管理**：React Hooks + Local Storage
- **图片导出**：html2canvas
- **构建工具**：Create React App

## 🚀 快速开始

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd classtable
```

2. 安装依赖
```bash
npm install
```

3. 启动开发服务器
```bash
npm start
```

4. 打开浏览器访问 `http://localhost:3000`

## 📖 使用指南

### 1. 教师管理
1. 点击"教师管理"标签
2. 添加任课教师信息
3. 设置教师的专业领域和不可用时间段

### 2. 课程管理
1. 点击"课程管理"标签
2. 手动添加课程或使用批量导入功能
3. 设置课程的固定上课时间段

#### 批量导入格式
支持以下格式的文本粘贴导入：
```
高级算法设计与分析2班	周毅	计算机科学与工程学院（网络空间安全学院）	清水河	32	2	1-8周，星期一第7-8节 星期三第7-8节 (立人楼B406)
```

### 3. 课表查看
1. 点击"我的课表"标签
2. 查看完整的周课表
3. 使用教师筛选功能查看特定教师的课程
4. 点击"导出图片"保存课表为图片

### 4. 课表生成
1. 点击"课表生成"标签
2. 查看当前数据统计
3. 点击"生成课表"基于固定时间段生成课表
4. 查看冲突检测结果

## ⚙️ 时间段设置

系统支持 12 个时间段：

| 节次 | 时间 | 节次 | 时间 |
|------|------|------|------|
| 第1节 | 8:30-9:15 | 第7节 | 16:20-17:05 |
| 第2节 | 9:20-10:05 | 第8节 | 17:10-17:55 |
| 第3节 | 10:20-11:05 | 第9节 | 19:30-20:15 |
| 第4节 | 11:10-11:55 | 第10节 | 20:20-21:05 |
| 第5节 | 14:30-15:15 | 第11节 | 21:10-21:55 |
| 第6节 | 15:20-16:05 | 第12节 | 22:00-22:45 |

## 🔧 调试功能

### 数据验证
- 自动检查课程数据完整性
- 验证时间段配置有效性
- 检测数据格式错误

### 调试工具
- 点击"调试信息"按钮查看详细数据状态
- 控制台输出完整的数据验证结果
- 自动数据迁移和格式转换

## 📁 项目结构

```
src/
├── components/              # React 组件
│   ├── TeacherManager.tsx      # 教师管理
│   ├── SimpleCourseManager.tsx # 课程管理
│   ├── SimpleCourseImporter.tsx # 课程导入
│   ├── ScheduleView.tsx        # 课表展示
│   └── ScheduleGenerator.tsx   # 课表生成
├── types/                   # TypeScript 类型定义
│   └── index.ts
├── utils/                   # 工具函数
│   ├── schedulingAlgorithm.ts  # 排课算法
│   ├── defaultData.ts          # 默认数据
│   ├── dataMigration.ts        # 数据迁移
│   ├── debugHelper.ts          # 调试工具
│   └── predefinedSchedule.ts   # 预定义课表
├── hooks/                   # 自定义 Hooks
│   └── useLocalStorage.ts
└── App.tsx                  # 主应用组件
```

## 🎨 界面特色

- **现代化设计**：采用 Tailwind CSS 构建的现代化界面
- **响应式布局**：适配桌面和移动设备
- **直观操作**：简洁明了的用户交互
- **实时反馈**：操作结果即时显示

## 🔄 数据格式

### 课程数据结构
```typescript
interface Course {
  id: string;
  name: string;           // 课程名称
  subject: string;        // 学科
  teacherId: string;      // 教师ID
  credits: number;        // 学分
  location?: string;      // 上课地点
  weeks?: string;         // 上课周次
  fixedTimeSlots: FixedTimeSlot[]; // 固定时间段
}

interface FixedTimeSlot {
  dayOfWeek: number;      // 1-7 (周一-周日)
  timeSlotIds: string[];  // 时间段ID数组
}
```

### 教师数据结构
```typescript
interface Teacher {
  id: string;
  name: string;           // 教师姓名
  email?: string;         // 邮箱
  phone?: string;         // 电话
  subjects: string[];     // 授课科目
  unavailableSlots: string[]; // 不可用时间段
}
```

## 🚨 常见问题

### Q: 课表生成失败怎么办？
A: 点击"调试信息"按钮查看详细错误，或点击"重置数据"清除所有数据重新开始。

### Q: 如何批量导入课程？
A: 在课程管理页面点击"批量导入课程"，粘贴符合格式的课程信息即可。

### Q: 导出的图片模糊怎么办？
A: 确保浏览器缩放比例为100%，或尝试在不同浏览器中导出。

### Q: 如何设置课程的上课时间？
A: 在添加或编辑课程时，使用"添加时间段"功能设置具体的上课日期和时间节次。

### Q: 数据会丢失吗？
A: 所有数据都保存在浏览器本地存储中，除非手动清除浏览器数据或点击"重置数据"按钮。

## 📝 更新日志

### v2.0.0 (当前版本)
- 🔄 重构为个人课表管理系统
- ❌ 移除班级和教室管理功能
- ✅ 添加固定时间段课程管理
- 🖼️ 新增课表图片导出功能
- 📥 支持批量课程导入
- 🔧 完善数据验证和调试工具
- 🎨 优化用户界面和交互体验
- 🛡️ 添加数据迁移和兼容性处理

### v1.0.0
- 初始版本发布
- 基础的教师、教室、课程、班级管理
- CSP算法智能排课功能

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发规范
- 使用 TypeScript 进行类型安全开发
- 遵循 React Hooks 最佳实践
- 保持组件的单一职责原则
- 编写清晰的注释和文档

### 提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 代码重构
- test: 测试相关
- chore: 构建过程或辅助工具的变动

## 📄 许可证

MIT License

---

**个人课表管理系统** - 让学生课表管理变得简单高效！

如有问题或建议，欢迎提交 Issue 或联系开发团队。